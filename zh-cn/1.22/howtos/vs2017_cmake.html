



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Visual Studio 2017 - CMake integration &mdash; conan 1.22.3 文档</title>
  

  
  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../_static/css/search.css" type="text/css" />
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="conan 1.22.3 文档" href="../index.html"/>
        <link rel="up" title="Howtos" href="../howtos.html"/>
        <link rel="next" title="Working with Intel compiler" href="intel_compiler.html"/>
        <link rel="prev" title="How to manage the GCC &gt;= 5 ABI" href="manage_gcc_abi.html"/>


 



</script>
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://conan.io">
          

          
            
            <img src="../_static/conan-logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howtos.html">Howtos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="header_only.html">How to package header-only libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmake_launch.html">How to launch conan install from cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="visual_studio_packages.html">How to create and reuse packages based on Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="makefiles.html">Creating and reusing packages based on Makefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="manage_gcc_abi.html">How to manage the GCC &gt;= 5 ABI</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Visual Studio 2017 - CMake integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-cmake-conan">Using cmake-conan</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-tasks-with-tasks-vs-json">Using tasks with tasks.vs.json</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="intel_compiler.html">Working with Intel compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="manage_cpp_standard.html">How to manage C++ standard [EXPERIMENTAL]</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_conan_in_docker.html">How to use Docker to create and cross-build C and C++ Conan packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_code_reuse.html">How to reuse Python code in recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_generators.html">How to create and share a custom generator with generator packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="manage_shared_libraries.html">How to manage shared libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmake_install.html">How to reuse cmake install for package() method</a></li>
<li class="toctree-l2"><a class="reference internal" href="collaborate_packages.html">How to collaborate with other users’ packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_apple_framework.html">How to link with Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_apple_framework.html#how-to-package-apple-frameworks">How to package Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="collect_licenses.html">How to collect licenses of dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="extract_licenses_from_headers.html">How to extract licenses from headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html">How to dynamically define the name and version of a package</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-scm-git">How to capture package version from SCM: git</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-scm-svn">How to capture package version from SCM: svn</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-text-or-build-files">How to capture package version from text or build files</a></li>
<li class="toctree-l2"><a class="reference internal" href="other_languages_package_manager.html">How to use Conan as other language package manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="use_tls_certificates.html">How to manage SSL (TLS) certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="check_conan_version_in_conanfile.html">How to check the version of the Conan client inside a conanfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_ci_artifactory.html">Use a generic CI with Conan and Artifactory</a></li>
<li class="toctree-l2"><a class="reference internal" href="sanitizers.html">Compiler sanitizers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p>Sign up for release updates:</p>
              <script src="https://app-lon04.marketo.com/js/forms2/js/forms2.min.js"></script>
              <form id="mktoForm_1479"></form>
              <script>MktoForms2.loadForm("https://app-lon04.marketo.com", "256-FNZ-187", 1479);</script>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../howtos.html">Howtos</a> &raquo;</li>
        
      <li>Using Visual Studio 2017 - CMake integration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/howtos/vs2017_cmake.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-visual-studio-2017-cmake-integration">
<span id="visual2017-cmake-howto"></span><h1>Using Visual Studio 2017 - CMake integration<a class="headerlink" href="#using-visual-studio-2017-cmake-integration" title="永久链接至标题">¶</a></h1>
<p>Visual Studio 2017 comes with a CMake integration that allows one to just open a folder that contains a <em>CMakeLists.txt</em>
and Visual will use it to define the project build.</p>
<p>Conan can also be used in this setup to install dependencies. Let`s say that we are going to build an application that depends
on an existing Conan package called <code class="docutils literal notranslate"><span class="pre">Hello/0.1&#64;user/testing</span></code>. For the purpose of this example, you can quickly create this package by typing
in your terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>Hello/0.1<span class="w"> </span>-s
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>user/testing<span class="w"> </span><span class="c1"># Default conan profile is Release</span>
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>user/testing<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<p>The project we want to develop will be a simple application with these 3 files in the same folder:</p>
<div class="literal-block-wrapper docutils container" id="container-1">
<div class="code-block-caption"><span class="caption-text"><strong>example.cpp</strong></span><a class="headerlink" href="#container-1" title="永久链接至代码">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;hello.h&quot;</span>

<span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">hello</span><span class="p">();</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="p">.</span><span class="n">ignore</span><span class="p">();</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="container-2">
<div class="code-block-caption"><span class="caption-text"><strong>conanfile.txt</strong></span><a class="headerlink" href="#container-2" title="永久链接至代码">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[requires]
Hello/0.1@user/testing

[generators]
cmake
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="container-3">
<div class="code-block-caption"><span class="caption-text"><strong>CMakeLists.txt</strong></span><a class="headerlink" href="#container-3" title="永久链接至代码">¶</a></div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">Example</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.8.12</span><span class="p">)</span>

<span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/conanbuildinfo.cmake</span><span class="p">)</span>
<span class="nb">conan_basic_setup</span><span class="p">()</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">example.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="o">${</span><span class="nv">CONAN_LIBS</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If we open Visual Studio 2017 (with CMake support installed), and select “Open Folder” from the menu, and select the above folder,
we will see something like the following error:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">1</span>&gt;<span class="w"> </span>Command<span class="w"> </span>line:<span class="w"> </span>C:<span class="se">\P</span>ROGRAM<span class="w"> </span>FILES<span class="w"> </span><span class="o">(</span>X86<span class="o">)</span><span class="se">\M</span>ICROSOFT<span class="w"> </span>VISUAL<span class="w"> </span>STUDIO<span class="se">\2</span><span class="m">017</span><span class="se">\C</span>OMMUNITY<span class="se">\C</span>OMMON7<span class="se">\I</span>DE<span class="se">\C</span>OMMONEXTENSIONS<span class="se">\M</span>ICROSOFT<span class="se">\C</span>MAKE<span class="se">\C</span>Make<span class="se">\b</span>in<span class="se">\c</span>make.exe<span class="w">  </span>-G<span class="w"> </span><span class="s2">&quot;Ninja&quot;</span><span class="w"> </span>-DCMAKE_INSTALL_PREFIX:PATH<span class="o">=</span><span class="s2">&quot;C:\Users\user\CMakeBuilds\df6639d2-3ef2-bc32-abb3-2cd1bdb3c1ab\install\x64-Debug&quot;</span><span class="w">  </span>-DCMAKE_CXX_COMPILER<span class="o">=</span><span class="s2">&quot;C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.12.25827/bin/HostX64/x64/cl.exe&quot;</span><span class="w">  </span>-DCMAKE_C_COMPILER<span class="o">=</span><span class="s2">&quot;C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.12.25827/bin/HostX64/x64/cl.exe&quot;</span><span class="w">  </span>-DCMAKE_BUILD_TYPE<span class="o">=</span><span class="s2">&quot;Debug&quot;</span><span class="w"> </span>-DCMAKE_MAKE_PROGRAM<span class="o">=</span><span class="s2">&quot;C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2017\COMMUNITY\COMMON7\IDE\COMMONEXTENSIONS\MICROSOFT\CMAKE\Ninja\ninja.exe&quot;</span><span class="w"> </span><span class="s2">&quot;C:\Users\user\conanws\visual-cmake&quot;</span>
<span class="hll"><span class="m">1</span>&gt;<span class="w"> </span>Working<span class="w"> </span>directory:<span class="w"> </span>C:<span class="se">\U</span>sers<span class="se">\u</span>ser<span class="se">\C</span>MakeBuilds<span class="se">\d</span>f6639d2-3ef2-bc32-abb3-2cd1bdb3c1ab<span class="se">\b</span>uild<span class="se">\x</span><span class="m">64</span>-Debug
</span><span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>The<span class="w"> </span>CXX<span class="w"> </span>compiler<span class="w"> </span>identification<span class="w"> </span>is<span class="w"> </span>MSVC<span class="w"> </span><span class="m">19</span>.12.25831.0
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Check<span class="w"> </span><span class="k">for</span><span class="w"> </span>working<span class="w"> </span>CXX<span class="w"> </span>compiler:<span class="w"> </span>C:/Program<span class="w"> </span>Files<span class="w"> </span><span class="o">(</span>x86<span class="o">)</span>/Microsoft<span class="w"> </span>Visual<span class="w"> </span>Studio/2017/Community/VC/Tools/MSVC/14.12.25827/bin/HostX64/x64/cl.exe
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Check<span class="w"> </span><span class="k">for</span><span class="w"> </span>working<span class="w"> </span>CXX<span class="w"> </span>compiler:<span class="w"> </span>C:/Program<span class="w"> </span>Files<span class="w"> </span><span class="o">(</span>x86<span class="o">)</span>/Microsoft<span class="w"> </span>Visual<span class="w"> </span>Studio/2017/Community/VC/Tools/MSVC/14.12.25827/bin/HostX64/x64/cl.exe<span class="w"> </span>--<span class="w"> </span>works
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Detecting<span class="w"> </span>CXX<span class="w"> </span>compiler<span class="w"> </span>ABI<span class="w"> </span>info
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Detecting<span class="w"> </span>CXX<span class="w"> </span>compiler<span class="w"> </span>ABI<span class="w"> </span>info<span class="w"> </span>-<span class="w"> </span><span class="k">done</span>
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Detecting<span class="w"> </span>CXX<span class="w"> </span>compile<span class="w"> </span>features
<span class="m">1</span>&gt;<span class="w"> </span>--<span class="w"> </span>Detecting<span class="w"> </span>CXX<span class="w"> </span>compile<span class="w"> </span>features<span class="w"> </span>-<span class="w"> </span><span class="k">done</span>
<span class="hll"><span class="m">1</span>&gt;<span class="w"> </span>CMake<span class="w"> </span>Error<span class="w"> </span>at<span class="w"> </span>CMakeLists.txt:4<span class="w"> </span><span class="o">(</span>include<span class="o">)</span>:
</span><span class="hll"><span class="m">1</span>&gt;<span class="w">   </span>include<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>find<span class="w"> </span>load<span class="w"> </span>file:
</span><span class="hll"><span class="m">1</span>&gt;
</span><span class="hll"><span class="m">1</span>&gt;<span class="w">     </span>C:/Users/user/CMakeBuilds/df6639d2-3ef2-bc32-abb3-2cd1bdb3c1ab/build/x64-Debug/conanbuildinfo.cmake
</span></pre></div>
</div>
<p>As expected, our <em>CMakeLists.txt</em> is using an <code class="docutils literal notranslate"><span class="pre">include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)</span></code>, and that file doesn’t exist yet,
because Conan has not yet installed the dependencies of this project. Visual Studio 2017 uses different build folders for each
configuration. In this case, the default configuration at startup is <code class="docutils literal notranslate"><span class="pre">x64-Debug</span></code>. This means that we need to install the
dependencies that match this configuration. Assuming that our default profile is using Visual Studio 2017 for x64 (it should typically be
the default one created by Conan if VS2017 is present), then all we need to specify is the <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">build_type=Debug</span></code> setting:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug<span class="w"> </span>-if<span class="o">=</span>C:<span class="se">\U</span>sers<span class="se">\u</span>ser<span class="se">\C</span>MakeBuilds<span class="se">\d</span>f6639d2-3ef2-bc32-abb3-2cd1bdb3c1ab<span class="se">\b</span>uild<span class="se">\x</span><span class="m">64</span>-Debug
</pre></div>
</div>
<p>Now, you should be able to regenerate the CMake project from the IDE, Menu-&gt;CMake, build it, select the “example” executable to run, and run
it.</p>
<p>Now, let’s say that you want to build the Release application. You switch configuration from the IDE, and then the above error happens
again. The dependencies for Release mode need to be installed too:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-if<span class="o">=</span>C:<span class="se">\U</span>sers<span class="se">\u</span>ser<span class="se">\C</span>MakeBuilds<span class="se">\d</span>f6639d2-3ef2-bc32-abb3-2cd1bdb3c1ab<span class="se">\b</span>uild<span class="se">\x</span><span class="m">64</span>-Release
</pre></div>
</div>
<p>The process can be extended to x86 (passing <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">arch=x86</span></code> in the command line), or to other configurations. For production usage,
Conan <strong>profiles</strong> are highly recommended.</p>
<div class="section" id="using-cmake-conan">
<h2>Using cmake-conan<a class="headerlink" href="#using-cmake-conan" title="永久链接至标题">¶</a></h2>
<p>The <strong>cmake-conan</strong> project in <a class="reference external" href="https://github.com/conan-io/cmake-conan">https://github.com/conan-io/cmake-conan</a> is a CMake script that runs an <code class="docutils literal notranslate"><span class="pre">execute_process</span></code> that automatically
launches <strong class="command">conan install</strong> to install dependencies. The settings passed in the command line will be derived from the current CMake
configuration, that will match the Visual Studio one. This script can be used to further automate the installation task:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">Example</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.8.12</span><span class="p">)</span>

<span class="c"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">EXISTS</span><span class="w"> </span><span class="s2">&quot;${CMAKE_BINARY_DIR}/conan.cmake&quot;</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span><span class="w"> </span><span class="s2">&quot;Downloading conan.cmake from https://github.com/conan-io/cmake-conan&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nb">file</span><span class="p">(</span><span class="s">DOWNLOAD</span><span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/conan-io/cmake-conan/v0.9/conan.cmake&quot;</span>
<span class="w">                </span><span class="s2">&quot;${CMAKE_BINARY_DIR}/conan.cmake&quot;</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/conan.cmake</span><span class="p">)</span>

<span class="nb">conan_cmake_run</span><span class="p">(</span><span class="s">CONANFILE</span><span class="w"> </span><span class="s">conanfile.txt</span>
<span class="w">                </span><span class="s">BASIC_SETUP</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">example.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="o">${</span><span class="nv">CONAN_LIBS</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will manage to download the <strong>cmake-conan</strong> CMake script, and use it automatically, calling a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> automatically.</p>
<p>There could be an issue, though, for the <code class="docutils literal notranslate"><span class="pre">Release</span></code> configuration. Internally, the Visual Studio 2017 defines the <code class="docutils literal notranslate"><span class="pre">configurationType</span></code> As
<code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code> for <code class="docutils literal notranslate"><span class="pre">Release</span></code> builds. But Conan default settings (in the Conan <em>settings.yml</em> file), only have <code class="docutils literal notranslate"><span class="pre">Debug</span></code> and <code class="docutils literal notranslate"><span class="pre">Release</span></code>
defined. It is possible to modify the <em>settings.yml</em> file, and add those extra build types. Then you should create the <code class="docutils literal notranslate"><span class="pre">Hello</span></code> package
for those settings. And most existing packages, specially in central repositories, are built only for Debug and Release modes.</p>
<p>An easier approach is to change the CMake configuration in Visual: go to the Menu -&gt; CMake -&gt; Change CMake Configuration. That should open
the <em>CMakeSettings.json</em> file, and there you can change the <code class="docutils literal notranslate"><span class="pre">configurationType</span></code> to <code class="docutils literal notranslate"><span class="pre">Release</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> {
     &quot;name&quot;: &quot;x64-Release&quot;,
     &quot;generator&quot;: &quot;Ninja&quot;,
<span class="hll">     &quot;configurationType&quot;: &quot;Release&quot;,
</span>     &quot;inheritEnvironments&quot;: [ &quot;msvc_x64_x64&quot; ],
     &quot;buildRoot&quot;: &quot;${env.USERPROFILE}\\CMakeBuilds\\${workspaceHash}\\build\\${name}&quot;,
     &quot;installRoot&quot;: &quot;${env.USERPROFILE}\\CMakeBuilds\\${workspaceHash}\\install\\${name}&quot;,
     &quot;cmakeCommandArgs&quot;: &quot;&quot;,
     &quot;buildCommandArgs&quot;: &quot;-v&quot;,
     &quot;ctestCommandArgs&quot;: &quot;&quot;
 }
</pre></div>
</div>
<p>Note that the above CMake code is only valid for consuming existing packages. If you are also creating a package, you
would need to make sure the right CMake code is executed, please check <a class="reference external" href="https://github.com/conan-io/cmake-conan/blob/master/README.md">https://github.com/conan-io/cmake-conan/blob/master/README.md</a></p>
</div>
<div class="section" id="using-tasks-with-tasks-vs-json">
<h2>Using tasks with tasks.vs.json<a class="headerlink" href="#using-tasks-with-tasks-vs-json" title="永久链接至标题">¶</a></h2>
<p>Another alternative is using file <a class="reference external" href="https://docs.microsoft.com/en-us/visualstudio/ide/customize-build-and-debug-tasks-in-visual-studio?view=vs-2017">tasks</a>
feature of Visual Studio 2017. This way you can install dependencies by running <strong class="command">conan install</strong> as task directly in the IDE.</p>
<p>All you need is to right click on your <em>conanfile.py</em> -&gt; Configure Tasks (see the
<a class="reference external" href="https://docs.microsoft.com/en-us/visualstudio/ide/customize-build-and-debug-tasks-in-visual-studio?view=vs-2017">link above</a>) and add the
following to your <em>tasks.vs.json</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">The file <em>tasks.vs.json</em> is added to your local <em>.vs</em> folder so it is not supposed to be added to your version control system.</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> {
     &quot;tasks&quot;: [
         {
         &quot;taskName&quot;: &quot;conan install debug&quot;,
         &quot;appliesTo&quot;: &quot;conanfile.py&quot;,
         &quot;type&quot;: &quot;launch&quot;,
<span class="hll">         &quot;command&quot;: &quot;${env.COMSPEC}&quot;,
</span>         &quot;args&quot;: [
<span class="hll">             &quot;conan install ${file} -s build_type=Debug -if C:/Users/user/CMakeBuilds/4c2d87b9-ec5a-9a30-a47a-32ccb6cca172/build/x64-Debug/&quot;
</span>         ]
         },
         {
         &quot;taskName&quot;: &quot;conan install release&quot;,
         &quot;appliesTo&quot;: &quot;conanfile.py&quot;,
         &quot;type&quot;: &quot;launch&quot;,
<span class="hll">         &quot;command&quot;: &quot;${env.COMSPEC}&quot;,
</span>         &quot;args&quot;: [
<span class="hll">             &quot;conan install ${file} -s build_type=Release -if C:/Users/user/CMakeBuilds/4c2d87b9-ec5a-9a30-a47a-32ccb6cca172/build/x64-Release/&quot;
</span>         ]
         }
     ],
     &quot;version&quot;: &quot;0.2.1&quot;
 }
</pre></div>
</div>
<p>Then just right click on your <em>conanfile.py</em> and launch your <strong class="command">conan install</strong> and regenerate your <em>CMakeLists.txt</em>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="intel_compiler.html" class="btn btn-neutral float-right" title="Working with Intel compiler" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="manage_gcc_abi.html" class="btn btn-neutral" title="How to manage the GCC &gt;= 5 ABI" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, JFrog.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.22.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../_static/js/modernizr.min.js"></script>
  <script src="../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.22");
  </script>


 


</body>
</html>