<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MesonDeps &mdash; conan 1.63.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/conan.css?v=2e89a5c2" />

  
    <link rel="shortcut icon" href="../../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/reference/conanfile/tools/meson/mesondeps.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=44970116"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/translations.js?v=beaddf03"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="next" title="Meson" href="meson.html" />
    <link rel="prev" title="MesonToolchain" href="mesontoolchain.html" />


 



</script>
<script type="text/javascript" src="../../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.63
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../conanfile.html">conanfile.py</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../methods.html">Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../tools.html">tools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../cmake.html">conan.tools.cmake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gnu.html">conan.tools.gnu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google.html">conan.tools.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apple.html">conan.tools.apple</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../meson.html">conan.tools.meson</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel.html">conan.tools.intel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../env.html">conan.tools.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../system.html">conan.tools.system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../files.html">conan.tools.files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../layout.html">conan.tools.layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scm.html">conan.tools.scm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build.html">conan.tools.build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../android.html">conan.tools.android</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scons.html">conan.tools.scons</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dependencies.html">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html#output-and-running">Output and Running</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../generators.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../build_helpers.html">Build helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../env_vars.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hooks.html">Hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
            <div class="admonition warning wy-text-center" style="position:sticky;top:0;border: 1px solid orange">
              <p>This document is for a <b>"1.X" legacy</b> Conan version. <a href="https://docs.conan.io/2/">Click here to read the <b>Conan 2.0</b> documentation</a></p>
            </div>
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../../../conanfile.html">conanfile.py</a></li>
          <li class="breadcrumb-item"><a href="../../tools.html">tools</a></li>
          <li class="breadcrumb-item"><a href="../meson.html">conan.tools.meson</a></li>
      <li class="breadcrumb-item active">MesonDeps</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/reference/conanfile/tools/meson/mesondeps.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mesondeps">
<span id="id1"></span><h1>MesonDeps<a class="headerlink" href="#mesondeps" title="Link to this heading"></a></h1>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>This feature is still <strong>under development</strong>, while it is recommended and usable and we will try not to break them in future releases,
some breaking changes might still happen if necessary to prepare for the <em>Conan 2.0 release</em>.</p>
</div>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.51.0">1.51.0</a></p>
<p><a class="reference internal" href="mesontoolchain.html#conan-meson-toolchain"><span class="std std-ref">MesonToolchain</span></a> normally works together with <a class="reference internal" href="../gnu/pkgconfigdeps.html#id1"><span class="std std-ref">PkgConfigDeps</span></a> to manage all the dependencies,
but sometimes we need to gather some flags coming from <code class="docutils literal notranslate"><span class="pre">Autotools</span></code> tool so that’s what <code class="docutils literal notranslate"><span class="pre">MesonDeps</span></code> is meant for. In other words, it is typically used
when Meson cannot find a dependency using the already known <a class="reference external" href="https://mesonbuild.com/Dependencies.html">detection mechanisms</a> like: <cite>pkg-config</cite>, <cite>cmake</cite>, <cite>config-tool</cite>, etc.
For instance, if we’d have these lines in your <cite>meson.build</cite> file, you might need <code class="docutils literal notranslate"><span class="pre">MesonDeps</span></code> to find that dependency and inject the correct flags to the compiler:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><strong>meson.build</strong></span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>project(&#39;tutorial&#39;, &#39;cpp&#39;)
cxx = meson.get_compiler(&#39;cpp&#39;)
mylib = cxx.find_library(&#39;mylib&#39;, required: true)
executable(&#39;app&#39;, &#39;main.cpp&#39;, dependencies: mylib)
</pre></div>
</div>
</div>
<p>In a nutshell, the <code class="docutils literal notranslate"><span class="pre">MesonDeps</span></code> generator is the dependencies generator for Meson and GNU flags. It creates a
<cite>conan_meson_deps_flags.ini</cite> file with all those flags collected by each dependency.</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>At this moment, this generator must be used along with <code class="docutils literal notranslate"><span class="pre">MesonToolchain</span></code> one to make it work correctly.</p>
</div>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>This class will require very soon to define both the “host” and “build” profiles. It is very recommended to
start defining both profiles immediately to avoid future breaking. Furthermore, some features, like trying to
cross-compile might not work at all if the “build” profile is not provided.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MesonDeps</span></code> generator can be used by name in conanfiles:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">conanfile.py</span><a class="headerlink" href="#id4" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;MesonDeps&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">conanfile.txt</span><a class="headerlink" href="#id5" title="Link to this code"></a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[generators]
MesonDeps
</pre></div>
</div>
</div>
<p>And it can also be fully instantiated in the conanfile <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.meson</span><span class="w"> </span><span class="kn">import</span> <span class="n">MesonDeps</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">MesonDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">MesonDeps</span></code> generates after a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> command a <cite>conan_meson_deps_flags.ini</cite> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>constants<span class="o">]</span>
<span class="nv">deps_c_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
<span class="nv">deps_c_link_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
<span class="nv">deps_cpp_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
<span class="nv">deps_cpp_link_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
</pre></div>
</div>
<p>This generator defines a Meson constants: <code class="docutils literal notranslate"><span class="pre">deps_c_args</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_c_link_args</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_cpp_args</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_cpp_link_args</span></code>,
that accumulate all dependencies information, including transitive dependencies, with flags like <code class="docutils literal notranslate"><span class="pre">-I&lt;path&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">-L&lt;path&gt;</span></code>, etc.</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>Those variables are added automatically as part of the built-in options declared by <code class="docutils literal notranslate"><span class="pre">MesonToolchain</span></code> generator: <code class="docutils literal notranslate"><span class="pre">c_args</span></code>, <code class="docutils literal notranslate"><span class="pre">c_link_args</span></code>,
<code class="docutils literal notranslate"><span class="pre">cpp_args</span></code>, <code class="docutils literal notranslate"><span class="pre">cpp_link_args</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>For now, only the <code class="docutils literal notranslate"><span class="pre">requires</span></code> information is generated, the <code class="docutils literal notranslate"><span class="pre">tool_requires</span></code> one is not managed by this generator yet.</p>
</div>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c_args</span></code>, <code class="docutils literal notranslate"><span class="pre">c_link_args</span></code>, <code class="docutils literal notranslate"><span class="pre">cpp_args</span></code>, <code class="docutils literal notranslate"><span class="pre">cpp_link_args</span></code>: list of flags that accumulate all dependencies information. Each one
is saved as <code class="docutils literal notranslate"><span class="pre">deps_c_args</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_c_link_args</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_cpp_args</span></code>, and <code class="docutils literal notranslate"><span class="pre">deps_cpp_link_args</span></code>, respectively in the
<cite>conan_meson_deps_flags.ini</cite> file.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.meson</span><span class="w"> </span><span class="kn">import</span> <span class="n">MesonDeps</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">MesonDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">c_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-val1&quot;</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">c_link_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-val2&quot;</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">cpp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-val3&quot;</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">cpp_link_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-val4&quot;</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mesontoolchain.html" class="btn btn-neutral float-left" title="MesonToolchain" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="meson.html" class="btn btn-neutral float-right" title="Meson" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 10月 27, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>