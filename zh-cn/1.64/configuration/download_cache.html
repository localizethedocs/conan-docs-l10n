<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Download cache &mdash; conan 1.64.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/conan.css?v=2e89a5c2" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/configuration/download_cache.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=3c7ede48"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Howtos" href="../howtos.html" />
    <link rel="prev" title="Configuration" href="../configuration.html" />


 



</script>
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.64
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Configuration</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Download cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#activating-deactivating-the-download-cache">Activating/deactivating the download cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concurrency-multiple-caches-and-ci">Concurrency, multiple caches and CI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removing-cached-files">Removing cached files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
            <div class="admonition warning wy-text-center" style="position:sticky;top:0;border: 1px solid orange">
              <p>This document is for a <b>"1.X" legacy</b> Conan version. <a href="https://docs.conan.io/2/">Click here to read the <b>Conan 2.0</b> documentation</a></p>
            </div>
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../configuration.html">Configuration</a></li>
      <li class="breadcrumb-item active">Download cache</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/configuration/download_cache.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="download-cache">
<span id="id1"></span><h1>Download cache<a class="headerlink" href="#download-cache" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This is an <strong>experimental</strong> feature subject to breaking changes in future releases.</p>
</div>
<p>Conan implements a shared download cache that can be used to reduce the time needed to populate the Conan package cache
with commands like <strong class="command">install</strong>, <strong class="command">create</strong>.</p>
<p>This cache is purely an optimization mechanism. It is completely different to the <a class="reference internal" href="../mastering/custom_cache.html#custom-cache"><span class="std std-ref">Conan package cache</span></a>, (typically the <code class="docutils literal notranslate"><span class="pre">&lt;userhome&gt;/.conan</span></code> folder).
It is not related to the <code class="docutils literal notranslate"><span class="pre">short_paths</span></code> mechanism for long path in Windows, nor to the <code class="docutils literal notranslate"><span class="pre">short_paths</span></code> cache folder. The cache will contain a copy
of the artifacts, it is not a new location of files. Those files will still be copied to the Conan package cache, which will not change anything,
its behavior, layout or location of any file.</p>
<p>This cache (whose path can be configured in the <em>conan.conf</em> file) will store the following items:</p>
<ul class="simple">
<li><p>All files that are downloaded from a Conan server (conan_server, Artifactory), both in the api V1 (without revisions) and V2 (with revisions).
This includes files like <em>conanfile.py</em>, but also the zipped artifacts like <em>conan_package.tgz</em> or <em>conan_sources.tgz</em>.</p></li>
<li><p>The downloads done by users with the <code class="docutils literal notranslate"><span class="pre">tools.download()</span></code> or <code class="docutils literal notranslate"><span class="pre">tools.get()</span></code> helpers, as long as they provide a checksum (md5, sha1, etc.). If
a checksum is not provided, even if the download cache is enabled, the download will be always executed and the files will not be cached.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The cache computes a sha256 checksum of the download URL and the file checksum whenever is available. As not always the file checksums
are available, the download cache will not be able to correctly cache artifacts with revisions enabled if a proxy suddenly and
transparently changes a existing server and moves it to a new location, without the clients changing the URL too.</p>
</div>
<section id="activating-deactivating-the-download-cache">
<h2>Activating/deactivating the download cache<a class="headerlink" href="#activating-deactivating-the-download-cache" title="Link to this heading"></a></h2>
<p>The download cache is activated and configured in the <a class="reference internal" href="../reference/config_files/conan.conf.html#conan-conf"><span class="std std-ref">conan.conf</span></a> like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[storage]
download_cache=/path/to/my/cache
</pre></div>
</div>
<p>It can be defined from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>storage.download_cache<span class="o">=</span><span class="s2">&quot;/path/to/my/cache&quot;</span>
<span class="c1"># Display it</span>
$<span class="w"> </span>conan<span class="w"> </span>config<span class="w"> </span>get<span class="w"> </span>storage.download_cache
</pre></div>
</div>
<p>And, as the <em>conan.conf</em> is part of the configuration, you can also put a common <em>conan.conf</em> file in a git repo or zip file and use
the <a class="reference internal" href="../reference/commands/consumer/config.html#conan-config-install"><span class="std std-ref">conan config install</span></a> command to automatically install it in Conan clients.</p>
<p>To deactivate the download cache, you can remove the entry <code class="docutils literal notranslate"><span class="pre">download_cache</span></code> from the <em>conan.conf</em> with the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>config<span class="w"> </span>rm<span class="w"> </span>storage.download_cache
</pre></div>
</div>
</section>
<section id="concurrency-multiple-caches-and-ci">
<h2>Concurrency, multiple caches and CI<a class="headerlink" href="#concurrency-multiple-caches-and-ci" title="Link to this heading"></a></h2>
<p>The downloads cache implements exclusive locks for concurrency, so it can be shared among different concurrent Conan instances.
This is a typical scenario in CI servers, in which each job uses a different Conan package cache (defined by <code class="docutils literal notranslate"><span class="pre">CONAN_USER_HOME</span></code> environment
variable). Every different Conan instance could configure its download cache to share the same storage. The download cache implements inter-process
exclusive locks, so only 1 process will access at a time to a given cached artifact. If other processes needs the same artifact, they will wait
until it is released, avoiding multiple downloads of the same file, even if they were requested almost simultaneously.</p>
<p>For Continuous Integration processes, it is recommended to have a different Conan package cache (<code class="docutils literal notranslate"><span class="pre">CONAN_USER_HOME</span></code>) for each job, in most of the cases,
because the Conan package cache is not concurrent, and it might also have old dependencies, stale packages, etc. It is better to run CI jobs in a clean
environment.</p>
</section>
<section id="removing-cached-files">
<h2>Removing cached files<a class="headerlink" href="#removing-cached-files" title="Link to this heading"></a></h2>
<p>The download cache will store a lot of artifacts, for all recipes, packages, versions and configurations that are used. This can grow and consume
a lot of storage. If you are using this feature, provide for a sufficiently large and fast download cache folder.</p>
<p>At the moment, it is only a folder. You can clean the cached artifacts just by removing that folder and its contents. You might also be able to
run scripts and jobs that remove old artifacts only. If you do such operations, please make sure that there are not other Conan processes using
it simultaneously, or they might fail.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Installation of binaries can be accelerated setting up parallel downloads with the <code class="docutils literal notranslate"><span class="pre">general.parallel_download</span></code>
<strong>experimental</strong> configuration in <a class="reference internal" href="../reference/config_files/conan.conf.html#conan-conf"><span class="std std-ref">conan.conf</span></a>. You might want to try combining both the parallel download and
the download cache for extra speed.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../configuration.html" class="btn btn-neutral float-left" title="Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../howtos.html" class="btn btn-neutral float-right" title="Howtos" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 2月 16, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>