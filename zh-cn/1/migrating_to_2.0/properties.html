<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Migrating legacy cpp_info attributes to set_property() &mdash; conan 1.65.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/conan.css?v=f9087e22" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/migrating_to_2.0/properties.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=b1fa76c8"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Commands" href="commands.html" />
    <link rel="prev" title="Migrating the recipes" href="recipes.html" />


 



</script>
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../conan_v2.html">Conan migration guide to 2.0</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="recipes.html">Migrating the recipes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Migrating legacy cpp_info attributes to set_property()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#migrating-from-names-to-cmake-target-name">Migrating from .names to cmake_target_name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-from-filenames-to-cmake-file-name">Migrating from .filenames to cmake_file_name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#translating-build-modules-to-cmake-build-modules">Translating .build_modules to cmake_build_modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-components-information">Migrating components information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migration-from-names-to-pkg-config-name">Migration from .names to pkg_config_name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">General changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_files.html">Configuration files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #c6ac58;background-color: #f7ecc6;padding: 3px">
              <p>Conan Center has stopped receiving updates for Conan 1.x packages. A new https://center2.conan.io Conan 2-only remote is now available. <a href="https://blog.conan.io/2024/09/30/Conan-Center-will-stop-receiving-updates-for-Conan-1.html">Read the blog post</a></p>
            </div>
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../conan_v2.html">Conan migration guide to 2.0</a></li>
          <li class="breadcrumb-item"><a href="recipes.html">Migrating the recipes</a></li>
      <li class="breadcrumb-item active">Migrating legacy cpp_info attributes to set_property()</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/migrating_to_2.0/properties.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="migrating-legacy-cpp-info-attributes-to-set-property">
<span id="properties-migration"></span><h1>Migrating legacy cpp_info attributes to set_property()<a class="headerlink" href="#migrating-legacy-cpp-info-attributes-to-set-property" title="Link to this heading"></a></h1>
<p>Migrating from <cite>.names</cite>, <cite>.filenames</cite> and <cite>.build_modules</cite> to <code class="docutils literal notranslate"><span class="pre">set_property()</span></code> is easy,
but there are some details to take into account for properties like <code class="docutils literal notranslate"><span class="pre">cmake_target_name</span></code>
and <code class="docutils literal notranslate"><span class="pre">cmake_file_name</span></code>. Let’s see some examples.</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>The 2 mechanisms are completely independent:</p>
<ul class="simple">
<li><p>Old way using <code class="docutils literal notranslate"><span class="pre">.names</span></code>, <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> will work exclusively for legacy generators like <code class="docutils literal notranslate"><span class="pre">cmake_find_package</span></code></p></li>
<li><p>New properties, like <code class="docutils literal notranslate"><span class="pre">set_property(&quot;cmake_target_name&quot;)</span></code> will work exclusively for new generators
like <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code>. They have changed to be absolute, and that would break legacy generators.</p></li>
<li><p>Recipes that want to provide support for both generators need to provide the 2 definitions in their
<code class="docutils literal notranslate"><span class="pre">package_info()</span></code></p></li>
</ul>
</div>
<section id="migrating-from-names-to-cmake-target-name">
<h2>Migrating from .names to cmake_target_name<a class="headerlink" href="#migrating-from-names-to-cmake-target-name" title="Link to this heading"></a></h2>
<p>It is important to note that <code class="docutils literal notranslate"><span class="pre">cmake_target_name</span></code> is <strong>not</strong> going to take the same value
as the <code class="docutils literal notranslate"><span class="pre">.names</span></code> attribute did. With the <code class="docutils literal notranslate"><span class="pre">.names</span></code> attribute, if you set a name for the
target in CMake, Conan would automatically create a “namespaced” target name with that
name. This code, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">filenames</span><span class="p">[</span><span class="s2">&quot;cmake_find_package&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;myname&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Will create a CMake target named <code class="docutils literal notranslate"><span class="pre">myname::myname</span></code>.</p>
<p>The property <code class="docutils literal notranslate"><span class="pre">cmake_target_name</span></code> accepts <strong>complete</strong> target names. That means that the
name you set with this property will be the one added to the CMake generated
files without appending any more information to it.
To translate the last example to the set_property model you should add the following
declaration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_target_name&quot;</span><span class="p">,</span> <span class="s2">&quot;myname::myname&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Note that you can use whatever name you want, it can have a different namespace, like
<code class="docutils literal notranslate"><span class="pre">mynamespace::myname</span></code> or use a name with no namespace at all.</p>
<p>Also, please note that you may want to have different target names
for both <a class="reference external" href="https://cmake.org/cmake/help/v3.15/command/find_package.html#full-signature-and-config-mode">config</a>
and <a class="reference external" href="https://cmake.org/cmake/help/v3.15/command/find_package.html#basic-signature-and-module-mode">module</a> CMake generated files.
For example, you have a package named <code class="docutils literal notranslate"><span class="pre">myssl</span></code> and you want to generate a <code class="docutils literal notranslate"><span class="pre">Findmyssl.cmake</span></code>
module that declares the target <code class="docutils literal notranslate"><span class="pre">MySSL::SSL</span></code>, but for config mode you
want to declare the target <code class="docutils literal notranslate"><span class="pre">MySSL</span></code> without namespaces. You can do that using the
<code class="docutils literal notranslate"><span class="pre">cmake_module_target_name</span></code> property. Also, when setting this property, remember to set
<code class="docutils literal notranslate"><span class="pre">cmake_find_mode</span></code> so that <cite>CMakeDeps</cite> generates those module files. Let’s see an
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MySSL</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;myssl&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_target_name&quot;</span><span class="p">,</span> <span class="s2">&quot;MySSL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_module_target_name&quot;</span><span class="p">,</span> <span class="s2">&quot;MySSL::SSL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_find_mode&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="migrating-from-filenames-to-cmake-file-name">
<h2>Migrating from .filenames to cmake_file_name<a class="headerlink" href="#migrating-from-filenames-to-cmake-file-name" title="Link to this heading"></a></h2>
<p>To migrate from <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> to names just use the same <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> value for the
property <code class="docutils literal notranslate"><span class="pre">cmake_file_name</span></code>. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">filenames</span><span class="p">[</span><span class="s2">&quot;cmake_find_package&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyFileName&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">filenames</span><span class="p">[</span><span class="s2">&quot;cmake_find_package_multi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyFileName&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Could be declared like this with <code class="docutils literal notranslate"><span class="pre">set_property()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_file_name&quot;</span><span class="p">,</span> <span class="s2">&quot;MyFileName&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Please note that for the legacy <code class="docutils literal notranslate"><span class="pre">.names</span></code> and <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> model, if <code class="docutils literal notranslate"><span class="pre">.filenames</span></code> is
not declared but <code class="docutils literal notranslate"><span class="pre">.names</span></code> is, then Conan will automatically set the value of
<code class="docutils literal notranslate"><span class="pre">.filenames</span></code> to the value of <code class="docutils literal notranslate"><span class="pre">.names</span></code>. So for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;cmake_find_package&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SomeName&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;cmake_find_package_multi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SomeName&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This will use “SomeName” to compose the generated filenames. In this case you should set <code class="docutils literal notranslate"><span class="pre">cmake_file_name</span></code> to “SomeName”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_file_name&quot;</span><span class="p">,</span> <span class="s2">&quot;SomeName&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Also, please note that you may want to use different file names
for both <a class="reference external" href="https://cmake.org/cmake/help/v3.15/command/find_package.html#full-signature-and-config-mode">config</a>
and <a class="reference external" href="https://cmake.org/cmake/help/v3.15/command/find_package.html#basic-signature-and-module-mode">module</a> CMake generated files.
If we take the previous example of the <code class="docutils literal notranslate"><span class="pre">myssl</span></code> and you want to generate a <code class="docutils literal notranslate"><span class="pre">FindMySSL.cmake</span></code> for module mode and
<code class="docutils literal notranslate"><span class="pre">myssl-config.cmake</span></code> for config mode, you can set the <code class="docutils literal notranslate"><span class="pre">cmake_module_file_name</span></code> to set the value for the module file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MySSL</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;myssl&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_file_name&quot;</span><span class="p">,</span> <span class="s2">&quot;myssl&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_module_file_name&quot;</span><span class="p">,</span> <span class="s2">&quot;MySSL&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_find_mode&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>You can read more about this properties in the <a class="reference internal" href="../reference/conanfile/tools/cmake/cmakedeps.html#cmakedeps-properties"><span class="std std-ref">CMakeDeps</span></a> properties reference.</p>
</section>
<section id="translating-build-modules-to-cmake-build-modules">
<h2>Translating .build_modules to cmake_build_modules<a class="headerlink" href="#translating-build-modules-to-cmake-build-modules" title="Link to this heading"></a></h2>
<p>The declared <cite>.build_modules</cite> come from the original package that declares useful CMake functions, variables
etc. We need to use the property <cite>cmake_build_modules</cite> to declare a list of cmake files instead of using <cite>cpp_info.build_modules</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PyBind11Conan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pybind11&quot;</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
        <span class="k">for</span> <span class="n">generator</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cmake_find_package&quot;</span><span class="p">,</span> <span class="s2">&quot;cmake_find_package_multi&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;main&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">build_modules</span><span class="p">[</span><span class="n">generator</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;cmake&quot;</span><span class="p">,</span> <span class="s2">&quot;pybind11&quot;</span><span class="p">,</span> <span class="s2">&quot;pybind11Common.cmake&quot;</span><span class="p">))</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>To translate this information to the new model we declare the <cite>cmake_build_modules</cite> property in the <cite>root cpp_info</cite> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PyBind11Conan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pybind11&quot;</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_build_modules&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;cmake&quot;</span><span class="p">,</span> <span class="s2">&quot;pybind11&quot;</span><span class="p">,</span> <span class="s2">&quot;pybind11Common.cmake&quot;</span><span class="p">)])</span>
        <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="migrating-components-information">
<h2>Migrating components information<a class="headerlink" href="#migrating-components-information" title="Link to this heading"></a></h2>
<p>As we said, all these properties but <code class="docutils literal notranslate"><span class="pre">cmake_file_name</span></code> and <code class="docutils literal notranslate"><span class="pre">cmake_module_file_name</span></code> have components
support, so for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;cmake_find_package&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mycomponent-name&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;cmake_find_package_multi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mycomponent-name&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;pkg_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mypkg-config-name&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">build_modules</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;mypkg_bm.cmake&quot;</span><span class="p">))</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Could be declared like this with the properties model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_target_name&quot;</span><span class="p">,</span> <span class="s2">&quot;component_namespace::mycomponent-name&quot;</span><span class="p">)</span>
    <span class="c1"># The property &quot;cmake_build_modules&quot; can&#39;t be declared in a component, do it in self.cpp_info</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;cmake_build_modules&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;mypkg_bm.cmake&quot;</span><span class="p">)])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;pkg_config_name&quot;</span><span class="p">,</span> <span class="s2">&quot;mypkg-config-name&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomponent&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;custom_name&quot;</span><span class="p">,</span> <span class="s2">&quot;mycomponent-name&quot;</span><span class="p">,</span> <span class="s2">&quot;custom_generator&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Please <strong>note</strong> that most of the legacy generators like <cite>cmake</cite>, <cite>cmake_multi</cite>,
<cite>cmake_find_package</cite>, <cite>cmake_find_package_multi</cite> and <cite>cmake_paths</cite> do not listen to these
properties at all, so if you want to maintain compatibility with consumers that use those
generators and also that information for new generators like
<cite>CMakeDeps</cite> you need both models living together in the same recipe.</p>
</section>
<section id="migration-from-names-to-pkg-config-name">
<h2>Migration from .names to pkg_config_name<a class="headerlink" href="#migration-from-names-to-pkg-config-name" title="Link to this heading"></a></h2>
<p>The current [pkg_config](<a class="reference external" href="https://docs.conan.io/1/reference/generators/pkg_config.html">https://docs.conan.io/1/reference/generators/pkg_config.html</a>)
generator suports the new <code class="docutils literal notranslate"><span class="pre">set_property</span></code> model for most of the properties. Then, the current
model can be translated to the new one without having to leave the old attributes in the
recipes. Let’s see an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AprConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;apr&quot;</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="s2">&quot;pkg_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;apr-1&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>In this case, you can remove the <code class="docutils literal notranslate"><span class="pre">.names</span></code> attribute and just leave:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">AprConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;apr&quot;</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;pkg_config_name&quot;</span><span class="p">,</span>  <span class="s2">&quot;apr-1&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>For more information about properties supported by <code class="docutils literal notranslate"><span class="pre">PkgConfigDeps</span></code> generator, please check the [Conan
documentation](<a class="reference external" href="https://docs.conan.io/1/reference/conanfile/tools/gnu/pkgconfigdeps.html#properties">https://docs.conan.io/1/reference/conanfile/tools/gnu/pkgconfigdeps.html#properties</a>).</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>Read <a class="reference internal" href="../creating_packages/package_information.html#package-information-components"><span class="std std-ref">Using Components</span></a> and <a class="reference internal" href="../reference/conanfile/methods.html#method-package-info"><span class="std std-ref">package_info()</span></a> to learn more.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="recipes.html" class="btn btn-neutral float-left" title="Migrating the recipes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="commands.html" class="btn btn-neutral float-right" title="Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 2月 16, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>