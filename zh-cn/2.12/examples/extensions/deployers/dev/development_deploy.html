<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a Conan-agnostic deploy of dependencies for developer use &mdash; conan 2.12.2 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/examples/extensions/deployers/dev/development_deploy.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=080fb1ff"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/translations.js?v=beaddf03"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../../search.html" />
    <link rel="next" title="Custom deployers" href="../custom_deployers.html" />
    <link rel="prev" title="Builtin deployers" href="../builtin_deployers.html" />


 



</script>
<script type="text/javascript" src="../../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.12
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ci_tutorial/tutorial.html">CI 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devops/devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../integrations.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../conanfile.html">ConanFile methods examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../extensions.html">Conan extensions examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../commands/custom_commands.html">Custom commands</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../builtin_deployers.html">Builtin deployers</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Creating a Conan-agnostic deploy of dependencies for developer use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../custom_deployers.html">Custom deployers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools.html">Conan recipe tools examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cross_build.html">Cross-building examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config_files.html">Configuration files examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../graph.html">Graph examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev_flow.html">Developer tools and flows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../commands.html">Conan commands examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../runners.html">Conan runners examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../incubating.html">Incubating features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../examples.html">Examples</a></li>
          <li class="breadcrumb-item"><a href="../../../extensions.html">Conan extensions examples</a></li>
          <li class="breadcrumb-item"><a href="../builtin_deployers.html">Builtin deployers</a></li>
      <li class="breadcrumb-item active">Creating a Conan-agnostic deploy of dependencies for developer use</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/examples/extensions/deployers/dev/development_deploy.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-a-conan-agnostic-deploy-of-dependencies-for-developer-use">
<span id="examples-extensions-builtin-deployers-development"></span><h1>Creating a Conan-agnostic deploy of dependencies for developer use<a class="headerlink" href="#creating-a-conan-agnostic-deploy-of-dependencies-for-developer-use" title="Link to this heading">¶</a></h1>
<p>With the <code class="docutils literal notranslate"><span class="pre">full_deploy</span></code> deployer it is possible to create a Conan-agnostic copy of dependencies that can be used by developers without even having Conan installed in their computers.</p>
<p>The common and recommended flow for most cases is using Conan packages directly from the Conan cache:</p>
<img alt="../../../../_images/packages_from_cache.png" class="align-center" src="../../../../_images/packages_from_cache.png" />
<p>However, in some situations, it might be useful to be able to deploy a copy of the dependencies into a user folder, so the dependencies can be located there instead of in the Conan cache.
This is possible using the Conan deployers.</p>
<p>Let’s see it with an example. All the source code is in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2.0 Github repository</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/examples/extensions/deployers/development_deploy
</pre></div>
</div>
<p>In the folder we can find the following <code class="docutils literal notranslate"><span class="pre">conanfile.txt</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[requires]</span>
<span class="na">zlib/1.2.13</span>

<span class="k">[tool_requires]</span>
<span class="na">cmake/3.25.3</span>

<span class="k">[generators]</span>
<span class="na">CMakeDeps</span>
<span class="na">CMakeToolchain</span>

<span class="k">[layout]</span>
<span class="na">cmake_layout</span>
</pre></div>
</div>
<p>The folder also contains a standard <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> and a <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> source file that can create
an executable that links with <code class="docutils literal notranslate"><span class="pre">zlib</span></code> library.</p>
<p>We can install the Debug and Release dependencies, and deploy a local copy of the packages with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--deployer<span class="o">=</span>full_deploy<span class="w"> </span>--build<span class="o">=</span>missing
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--deployer<span class="o">=</span>full_deploy<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug<span class="w"> </span>--build<span class="o">=</span>missing
</pre></div>
</div>
<p>This will create the following folders:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├──src
├──build
│   ├──generators
|         └── ZLibConfig.cmake
├──full_deploy
│   ├──build
│   │   └──cmake
│   │       └──3.25.3
│   │           └──x86_64
│   │               ├──bin
│   │
│   └──host
│       └──zlib
│           └──1.2.13
│               ├──Debug
│               │   └──x86_64
│               │       ├──include
│               │       ├──lib
│               └──Release
│                   └──x86_64
│                       ├──include
│                       ├──lib
</pre></div>
</div>
<p>(Note that you could use the <code class="docutils literal notranslate"><span class="pre">--deployer-folder</span></code> argument to change the base folder output path for the deployer)</p>
<p>This folder is fully self-contained. It contains both the necessary tools (like <code class="docutils literal notranslate"><span class="pre">cmake</span></code> executable), the headers and compiled libraries of <code class="docutils literal notranslate"><span class="pre">zlib</span></code> and the necessary files like <code class="docutils literal notranslate"><span class="pre">ZLibConfig.cmake</span></code> in the <code class="docutils literal notranslate"><span class="pre">build/generators</span></code> folder, that point to the binaries inside <code class="docutils literal notranslate"><span class="pre">full_deploy</span></code> with a relative path.</p>
<img alt="../../../../_images/independent_dependencies_deploy.png" class="align-center" src="../../../../_images/independent_dependencies_deploy.png" />
<p>The Conan cache can be removed, and even Conan uninstalled, then the folder could be moved elsewhere in the computer or copied to another computer, assuming it has the same configuration of OS, compiler, etc.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
$<span class="w"> </span>cp<span class="w"> </span>-R<span class="w"> </span>development_deploy<span class="w"> </span>/some/other/place
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/some/other/place
</pre></div>
</div>
<p>And the files could be used by developers as:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># Activate the environment to use CMake 3.25</span>
$<span class="w"> </span>generators<span class="se">\c</span>onanbuild.bat
$<span class="w"> </span>cmake<span class="w"> </span>--version
cmake<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.25.3
<span class="c1"># Configure, should match the settings used at install</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="se">\&quot;</span>Visual<span class="w"> </span>Studio<span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">2022</span><span class="se">\&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>generators/conan_toolchain.cmake
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
$<span class="w"> </span>Release<span class="se">\c</span>ompressor.exe
ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.13
</pre></div>
</div>
</div>
<p>The environment scripts in Linux and OSX are not relocatable, because they contain absolute paths and the <code class="docutils literal notranslate"><span class="pre">sh</span></code> shell <a class="reference external" href="https://stackoverflow.com/questions/29832037/how-to-get-script-directory-in-posix-sh/29835459#29835459">does not have any way to provide access to the current script directory for sourced files</a>.</p>
<p>This shouldn’t be a big blocker, as a “search and replace” with <code class="docutils literal notranslate"><span class="pre">sed</span></code> in the generators folder can fix it:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Linux</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build/Release/generators
<span class="c1"># Fix folders in Linux</span>
$<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s,{old_folder},{new_folder},g&#39;</span><span class="w"> </span>*
<span class="c1"># Fix folders in MacOS</span>
$<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s1">&#39;s,{old_folder},{new_folder},g&#39;</span><span class="w"> </span>*
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>conanbuild.sh
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
$<span class="w"> </span>cmake<span class="w"> </span>--version
cmake<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.25.3
$<span class="w"> </span>cmake<span class="w"> </span>../..<span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>generators/conan_toolchain.cmake<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
$<span class="w"> </span>./compressor
ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.13
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><strong>Best practices</strong></p>
<p>The fact that this flow is possible doesn’t mean that it is recommended for the majority of cases.
It has some limitations:</p>
<ul class="simple">
<li><p>It is less efficient, requiring an extra copy of dependencies</p></li>
<li><p>Only <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> are relocatable at this moment. For other build system integrations, please create a ticket in Github</p></li>
<li><p>Linux and OSX shell scripts are not relocatable and require a manual <code class="docutils literal notranslate"><span class="pre">sed</span></code></p></li>
<li><p>The binary variability is limited to Release/Debug. The generated files are exclusively for the current configuration, changing any other setting (os, compiler, architecture) will require a different deploy</p></li>
</ul>
<p>In the general case, normal usage of the cache is recommended. This “relocatable development deployment”
could be useful for distributing final products that looks like an SDK, to consumers of a project not using Conan.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../builtin_deployers.html" class="btn btn-neutral float-left" title="Builtin deployers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../custom_deployers.html" class="btn btn-neutral float-right" title="Custom deployers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 10月 28, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>