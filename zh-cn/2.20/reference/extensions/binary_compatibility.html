<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Binary compatibility &mdash; conan 2.20.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/reference/extensions/binary_compatibility.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=ea7e93f6"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Profile plugin" href="profile_plugin.html" />
    <link rel="prev" title="Hooks" href="hooks.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.20
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ci_tutorial/tutorial.html">CI 教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile.html">conanfile.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace_files.html">Workspace files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html">Recipe tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config_files.html">Configuration files</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../extensions.html">Extensions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="python_requires.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_commands.html">Custom commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_generators.html">Custom Conan generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="python_api.html">Python API</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployers.html">Deployers</a></li>
<li class="toctree-l3"><a class="reference internal" href="hooks.html">Hooks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Binary compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="profile_plugin.html">Profile plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="authorization_plugins.html">Authorization plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_wrapper.html">Command wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="package_signing.html">Package signing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../environment.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binary_model.html">The binary model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_server.html">Conan Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../runners.html">Runners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../incubating.html">Incubating features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../extensions.html">Extensions</a></li>
      <li class="breadcrumb-item active">Binary compatibility</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/reference/extensions/binary_compatibility.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="binary-compatibility">
<span id="reference-extensions-binary-compatibility"></span><h1>Binary compatibility<a class="headerlink" href="#binary-compatibility" title="Link to this heading">¶</a></h1>
<p>This plugin, located in the cache <code class="docutils literal notranslate"><span class="pre">extensions/plugins/compatibility/compatibility.py</span></code> allows defining custom
rules for the binary compatibility of packages across settings and options.
It has some built-in logic implemented, but can be customized.</p>
<p>The interface is a single function called <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">compatibility(conanfile)</span></code> that receives a single <code class="docutils literal notranslate"><span class="pre">conanfile</span></code>
object as argument. Its return will be equal to the <code class="docutils literal notranslate"><span class="pre">compatibility()</span></code> recipe method, an ordered list of
variations over <code class="docutils literal notranslate"><span class="pre">settings</span></code>, <code class="docutils literal notranslate"><span class="pre">options</span></code> that is considered to be binary compatible. Conan will check
that list in order for binary existence until one binary is found.
The following would be valid syntax (but not an useful or working one, as it will fail in Windows, for example):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">compatibility</span><span class="p">(</span><span class="n">conanfile</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">conanfile</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">build_type</span> <span class="o">==</span> <span class="s2">&quot;Debug&quot;</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Release&quot;</span><span class="p">)]})</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Conan provides a default <code class="docutils literal notranslate"><span class="pre">compatibility.py</span></code> implementation that implements binary compatibility for
different <code class="docutils literal notranslate"><span class="pre">compiler.cppstd</span></code> and <code class="docutils literal notranslate"><span class="pre">compiler.cstd</span></code> values. That is, by default it assumes that binaries built with different <code class="docutils literal notranslate"><span class="pre">cppstd</span></code>
and <code class="docutils literal notranslate"><span class="pre">cstd</span></code> values (for the same compiler and compiler version) are binary compatible, and can be linked together
without issues.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">compiler.cppstd</span></code> must be defined in profiles in most C++ scenarios. If a binary for a given
<code class="docutils literal notranslate"><span class="pre">compiler.cppstd</span></code> value doesn’t exist (that means, a binary built with exactly that setting),
Conan  default <code class="docutils literal notranslate"><span class="pre">compatibility.py</span></code> will iterate the supported <code class="docutils literal notranslate"><span class="pre">cppstd</span></code> values by that compiler version.
It is possible to disable this behavior for any specific package, adding to the package <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code>
recipe the <code class="docutils literal notranslate"><span class="pre">extension_properties</span> <span class="pre">=</span> <span class="pre">{&quot;compatibility_cppstd&quot;:</span> <span class="pre">False}</span></code> attribute, read the
<a class="reference internal" href="../conanfile/attributes.html#conan-conanfile-attributes-extension-properties"><span class="std std-ref">extension_properties docs</span></a>.</p>
<p>From Conan 2.4, the <code class="docutils literal notranslate"><span class="pre">compiler.cstd</span></code> setting is available. It will only be taken into account in the computation of
packages <code class="docutils literal notranslate"><span class="pre">package_id</span></code> when their recipes explicitly declare the <code class="docutils literal notranslate"><span class="pre">languages</span> <span class="pre">=</span> <span class="pre">&quot;C&quot;</span></code> attribute.</p>
<p>Some important rules:</p>
<ul class="simple">
<li><p>The built-in <code class="docutils literal notranslate"><span class="pre">compatibility.py</span></code> is subject to changes in future releases. To avoid being updated
in the future, please remove the first comment <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">This</span> <span class="pre">file</span> <span class="pre">was</span> <span class="pre">generated</span> <span class="pre">by</span> <span class="pre">Conan.</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The <code class="docutils literal notranslate"><span class="pre">compatibility.py</span></code> feature is in <strong>preview</strong>. The current default <code class="docutils literal notranslate"><span class="pre">compatibility.py</span></code> is
<strong>experimental</strong>.
See <a class="reference internal" href="../../introduction.html#stability"><span class="std std-ref">the Conan stability</span></a> section for more information.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>Read the <a class="reference internal" href="../binary_model.html#reference-binary-model"><span class="std std-ref">binary model reference</span></a> for a full view of the Conan binary model.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hooks.html" class="btn btn-neutral float-left" title="Hooks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="profile_plugin.html" class="btn btn-neutral float-right" title="Profile plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 2月 17, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>