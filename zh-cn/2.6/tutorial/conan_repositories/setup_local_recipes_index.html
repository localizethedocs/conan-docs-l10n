<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Local Recipes Index Repository &mdash; conan 2.6.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/tutorial/conan_repositories/setup_local_recipes_index.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=44300d06"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Developing packages locally" href="../developing_packages.html" />
    <link rel="prev" title="Contributing to Conan Center" href="conan_center.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../consuming_packages.html">Consuming packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_packages.html">Creating packages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../conan_repositories.html">Working with Conan repositories</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="setting_up_conan_remotes.html">Setting up a Conan remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="conan_center.html">Contributing to Conan Center</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Local Recipes Index Repository</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developing_packages.html">Developing packages locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../conan_repositories.html">Working with Conan repositories</a></li>
      <li class="breadcrumb-item active">Local Recipes Index Repository</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/tutorial/conan_repositories/setup_local_recipes_index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="local-recipes-index-repository">
<span id="setup-local-recipes-index"></span><h1>Local Recipes Index Repository<a class="headerlink" href="#local-recipes-index-repository" title="Link to this heading">¶</a></h1>
<p>The <cite>local_recipes_index</cite> repository is an <strong>experimental</strong> special type of repository to which you cannot
upload packages or store binaries. The purpose of this remote is:</p>
<ul class="simple">
<li><p>Enable contributors to share package recipes with the community, particularly for
libraries that might not be suitable for ConanCenter.</p></li>
<li><p>It also simplifies the process of building binaries from a private <cite>conan-center-index</cite>
fork, allowing absolute control over recipes, customization, and maintaining a stable
repository snapshot. This ensures robustness against upstream changes in ConanCenter.
For detailed setup and usage instructions, see the dedicated section in the Conan DevOps
Guide <a class="reference internal" href="../../devops/devops_local_recipes_index.html#devops-local-recipes-index"><span class="std std-ref">Local Recipes Index Repository</span></a>.</p></li>
</ul>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h2>
<p>To set up a local recipes index repository to share your own recipes, you need to organize
your recipes in a folder structure that mimics that of <cite>conan-center-index</cite>. To start you
can use the <cite>local_recipes_index</cite> template for the <cite>conan new</cite> command. For demonstration
purposes, let’s create a <cite>local-recipes-index</cite> repository for a hypothetical <cite>hello</cite>
library, with a license incompatible with Conan Center, using the <cite>local_recipes_index</cite>
template for the <cite>conan new</cite> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>repo<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>repo
$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>local_recipes_index<span class="w"> </span>-d<span class="w"> </span><span class="nv">name</span><span class="o">=</span>hello<span class="w"> </span>-d<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">0</span>.1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span><span class="nv">url</span><span class="o">=</span>https://github.com/conan-io/libhello/archive/refs/tags/0.0.1.zip<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span><span class="nv">sha256</span><span class="o">=</span>1dfb66cfd1e2fb7640c88cc4798fe25853a51b628ed9372ffc0ca285fe5be16b
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..
</pre></div>
</div>
<p>The <cite>conan new local_recipes_index</cite> command creates a template that assumes CMake as the
build system alongside other heavy assumptions. In practice, it will require customizing
it, but for this demo, it works as-is. It will create a folder layout equal to the
<cite>conan-center-index</cite> GitHub repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
└──<span class="w"> </span>repo
<span class="w">    </span>└──<span class="w"> </span>recipes
<span class="w">        </span>└──<span class="w"> </span>hello
<span class="w">            </span>├──<span class="w"> </span>all
<span class="w">            </span>│<span class="w">   </span>├──<span class="w"> </span>conandata.yml
<span class="w">            </span>│<span class="w">   </span>├──<span class="w"> </span>conanfile.py
<span class="w">            </span>│<span class="w">   </span>└──<span class="w"> </span>test_package
<span class="w">            </span>│<span class="w">       </span>├──<span class="w"> </span>CMakeLists.txt
<span class="w">            </span>│<span class="w">       </span>├──<span class="w"> </span>conanfile.py
<span class="w">            </span>│<span class="w">       </span>└──<span class="w"> </span>src
<span class="w">            </span>│<span class="w">           </span>└──<span class="w"> </span>example.cpp
<span class="w">            </span>└──<span class="w"> </span>config.yml
</pre></div>
</div>
<p>After setting up the repository, we add it as a local remote to Conan:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>mylocalrepo<span class="w"> </span>./repo<span class="w"> </span>--allowed-packages<span class="o">=</span><span class="s2">&quot;hello/*&quot;</span>
</pre></div>
</div>
<p>Please pay special attention to the <cite>–allowed-packages</cite> argument. This argument ensures
that all packages other than <cite>hello</cite> are discarded by Conan. This can be used to minimize
the surface area for a potential supply chain attack.</p>
<p>Now you can list and install packages from this new repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>list<span class="w"> </span><span class="s2">&quot;*&quot;</span><span class="w"> </span>-r<span class="o">=</span>mylocalrepo
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>--requires<span class="o">=</span>hello/0.1<span class="w"> </span>-r<span class="o">=</span>mylocalrepo<span class="w"> </span>--build<span class="o">=</span>missing
</pre></div>
</div>
<p>At this point, you could push this repository to your GitHub account and share it with the
community. Now, users simply need to clone the GitHub repository and add the cloned folder
as a local repository themselves.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Please be aware that, as we commented earlier, this feature is specifically tailored
for scenarios where certain libraries are not suitable for ConanCenter. Remember, a
“local-recipes-index” repository has limitations: it is not fully reproducible as it
models only versions and not revisions, and it does not provide binaries. Therefore,
outside of these cases, it is advised to use a remote package server such as
<a class="reference internal" href="setting_up_conan_remotes/artifactory/artifactory_ce_cpp.html#artifactory-ce-cpp"><span class="std std-ref">Artifactory</span></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../devops.html#devops"><span class="std std-ref">DevOps guide</span></a></p></li>
<li><p><a class="reference external" href="https://blog.conan.io/2024/04/23/Introducing-local-recipes-index-remote.html">Introducing the Local-Recipes-Index Post</a></p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="conan_center.html" class="btn btn-neutral float-left" title="Contributing to Conan Center" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../developing_packages.html" class="btn btn-neutral float-right" title="Developing packages locally" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 10月 28, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>