<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Packages in editable mode &mdash; conan 2.9.3 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/tutorial/developing_packages/editable_packages.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=38671b3a"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Understanding the Conan Package layout" href="package_layout.html" />
    <link rel="prev" title="Package Development Flow" href="local_package_development_flow.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../consuming_packages.html">Consuming packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_packages.html">Creating packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_repositories.html">Working with Conan repositories</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../developing_packages.html">Developing packages locally</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="local_package_development_flow.html">Package Development Flow</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Packages in editable mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="package_layout.html">Understanding the Conan Package layout</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../developing_packages.html">Developing packages locally</a></li>
      <li class="breadcrumb-item active">Packages in editable mode</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/tutorial/developing_packages/editable_packages.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="packages-in-editable-mode">
<span id="editable-packages"></span><h1>Packages in editable mode<a class="headerlink" href="#packages-in-editable-mode" title="Link to this heading">¶</a></h1>
<p>The normal way of working with Conan packages is to run a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> or <code class="docutils literal notranslate"><span class="pre">conan</span>
<span class="pre">export-pkg</span></code> to store them in the local cache, so that consumers use the packages stored
in the cache. In some cases, when you want to consume these packages while developing
them, it can be tedious to run <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> each time you make changes to the package.
For those cases, you can put your package in editable mode, and consumers will be able to
find the headers and artifacts in your local working directory, eliminating the need for
packaging.</p>
<p>Let’s see how we can put a package in editable mode and consume it from the local working
directory.</p>
<p>Please, first of all, clone the sources to recreate this project. You can find them in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2 repository</a> in GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/developing_packages/editable_packages
</pre></div>
</div>
<p>There are 2 folders inside this project:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── hello
│   ├── CMakeLists.txt
│   ├── conanfile.py
│   └── src
│       └── hello.cpp
└── say
    ├── CMakeLists.txt
    ├── conanfile.py
    ├── include
    │   └── say.h
    └── src
        └── say.cpp
</pre></div>
</div>
<ul class="simple">
<li><p>A “say” folder containing a fully fledged package, with its <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> and its source
code.</p></li>
<li><p>A “hello” folder containing a simple consumer project with a <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> and its
source code, which depends on the <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> requirement.</p></li>
</ul>
<p>We will put <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> in editable mode and show how the <code class="docutils literal notranslate"><span class="pre">hello</span></code> consumer can find <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code>
headers and binaries in its local working directory.</p>
<section id="put-say-1-0-package-in-editable-mode">
<h2>Put say/1.0 package in editable mode<a class="headerlink" href="#put-say-1-0-package-in-editable-mode" title="Link to this heading">¶</a></h2>
<p>To avoid creating the package <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> in the cache for every change, we are going to
put that package in editable mode, creating <strong>a link from the reference in the cache to
the local working directory</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>add<span class="w"> </span>say
$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>list
say/1.0
<span class="w">    </span>Path:<span class="w"> </span>/Users/.../examples2/tutorial/developing_packages/editable_packages/say/conanfile.py
</pre></div>
</div>
<p>From now on, every usage of <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> by any other Conan package or project will be
redirected to the
<code class="docutils literal notranslate"><span class="pre">/Users/.../examples2/tutorial/developing_packages/editable_packages/say/conanfile.py</span></code>
user folder instead of using the package from the Conan cache.</p>
<p>Note that the key of editable packages is a correct definition of the <code class="docutils literal notranslate"><span class="pre">layout()</span></code> of the
package. Read the <a class="reference internal" href="../../reference/conanfile/methods/layout.html#reference-conanfile-methods-layout"><span class="std std-ref">package layout() section</span></a> to learn more
about this method.</p>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">say</span></code> <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> recipe is using the predefined
<code class="docutils literal notranslate"><span class="pre">cmake_layout()</span></code> which defines the typical CMake project layout that can be different
depending on the platform and generator used.</p>
<p>Now that the <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> package is in editable mode, let’s build it locally:</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>We use CMake presets in this example. This requires CMake &gt;= 3.23 because the
“include” from <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> to <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code> is only supported
since that version. If you prefer not to use presets you can use something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>&lt;path&gt;<span class="w"> </span>-G<span class="w"> </span>&lt;CMake<span class="w"> </span>generator&gt;<span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>&lt;path<span class="w"> </span>to
conan_toolchain.cmake&gt;<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</pre></div>
</div>
<p>Conan will show the exact CMake command everytime you run <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> in case
you can’t use the presets feature.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>say

<span class="c1"># Windows: we will build 2 configurations to show multi-config</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Release
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>conan-default
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-debug

<span class="c1"># Linux, MacOS: we will only build 1 configuration</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
</pre></div>
</div>
</section>
<section id="using-say-1-0-package-in-editable-mode">
<h2>Using say/1.0 package in editable mode<a class="headerlink" href="#using-say-1-0-package-in-editable-mode" title="Link to this heading">¶</a></h2>
<p>Consuming a package in editable mode is transparent from the consumer perspective.
In this case we can build the <code class="docutils literal notranslate"><span class="pre">hello</span></code> application as usual:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../hello

<span class="c1"># Windows: we will build 2 configurations to show multi-config</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Release
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>conan-default
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-debug
$<span class="w"> </span>build<span class="se">\R</span>elease<span class="se">\h</span>ello.exe
say/1.0:<span class="w"> </span>Hello<span class="w"> </span>World<span class="w"> </span>Release!
...
$<span class="w"> </span>build<span class="se">\D</span>ebug<span class="se">\h</span>ello.exe
say/1.0:<span class="w"> </span>Hello<span class="w"> </span>World<span class="w"> </span>Debug!
...

<span class="c1"># Linux, MacOS: we will only build 1 configuration</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>./build/Release/hello
say/1.0:<span class="w"> </span>Hello<span class="w"> </span>World<span class="w"> </span>Release!
</pre></div>
</div>
<p>As you can see, <code class="docutils literal notranslate"><span class="pre">hello</span></code> can successfully find <code class="docutils literal notranslate"><span class="pre">say/1.0</span></code> header and library files.</p>
</section>
<section id="working-with-editable-packages">
<h2>Working with editable packages<a class="headerlink" href="#working-with-editable-packages" title="Link to this heading">¶</a></h2>
<p>Once the above steps have been completed, you can work with your build system or IDE
without involving Conan and make changes to the editable packages. The consumers will use
those changes directly. Let’s see how this works by making a change in the <code class="docutils literal notranslate"><span class="pre">say</span></code> source
code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../say
<span class="c1"># Edit src/say.cpp and change the error message from &quot;Hello&quot; to &quot;Bye&quot;</span>

<span class="c1"># Windows: we will build 2 configurations to show multi-config</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-debug

<span class="c1"># Linux, MacOS: we will only build 1 configuration</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
</pre></div>
</div>
<p>And build and run the “hello” project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../hello

<span class="c1"># Windows</span>
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-debug
$<span class="w"> </span>Release<span class="se">\h</span>ello.exe
say/1.0:<span class="w"> </span>Bye<span class="w"> </span>World<span class="w"> </span>Release!
$<span class="w"> </span>Debug<span class="se">\h</span>ello.exe
say/1.0:<span class="w"> </span>Bye<span class="w"> </span>World<span class="w"> </span>Debug!

<span class="c1"># Linux, MacOS</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
$<span class="w"> </span>./hello
say/1.0:<span class="w"> </span>Bye<span class="w"> </span>World<span class="w"> </span>Release!
</pre></div>
</div>
<p>In this manner, you can develop both the <code class="docutils literal notranslate"><span class="pre">say</span></code> library and the <code class="docutils literal notranslate"><span class="pre">hello</span></code> application
simultaneously without executing any Conan command in between. If you have both open in
your IDE, you can simply build one after the other.</p>
</section>
<section id="building-editable-dependencies">
<h2>Building editable dependencies<a class="headerlink" href="#building-editable-dependencies" title="Link to this heading">¶</a></h2>
<p>If there are many editable dependencies, it might be inconvenient to go one by one, building them in the right order.
It is possible to do an ordered build of the editable dependencies with the <code class="docutils literal notranslate"><span class="pre">--build</span></code> argument.</p>
<p>Let’s clean the previous local executables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clean<span class="w"> </span>-xdf
</pre></div>
</div>
<p>And using the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method in the <code class="docutils literal notranslate"><span class="pre">hello/conanfile.py</span></code> recipe that we haven’t really used so far (because
we have been building directly calling <code class="docutils literal notranslate"><span class="pre">cmake</span></code>, not by calling <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">build</span></code> command), we can do such build with
just:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>build<span class="w"> </span>hello
</pre></div>
</div>
<p>Note that all we had to do to do a full build of this project is these two commands. Starting from scratch in a different folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/developing_packages/editable_packages
$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>add<span class="w"> </span>say
$<span class="w"> </span>conan<span class="w"> </span>build<span class="w"> </span>hello<span class="w"> </span>--build<span class="o">=</span>editable
</pre></div>
</div>
<p>Note that if we don’t pass the <code class="docutils literal notranslate"><span class="pre">--build=editable</span></code> to <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">build</span> <span class="pre">hello</span></code>, the binaries for <code class="docutils literal notranslate"><span class="pre">say/0.1</span></code> that is in editable mode
won’t be available and it will fail. With the <code class="docutils literal notranslate"><span class="pre">--build=editable</span></code>, first a build of the <code class="docutils literal notranslate"><span class="pre">say</span></code> binaries is done locally and
incrementally, and then another incremental build of <code class="docutils literal notranslate"><span class="pre">hello</span></code> will be done. Everything will still happen locally, with no packages
built in the cache. If there are multiple <code class="docutils literal notranslate"><span class="pre">editable</span></code> dependencies, with nested transitive dependencies, Conan will build them
in the right order.</p>
<p>If editable packages have dependants in the Conan cache, it is possible to force the rebuild from source of the
cache dependants by using <code class="docutils literal notranslate"><span class="pre">--build=editable</span> <span class="pre">--build=cascade</span></code>. In general this should be avoided, and the recommendation if it
is needed to rebuild those dependencies is to put them in editable mode too.</p>
<p>Note that it is possible to build and test a package in editable with with its own <code class="docutils literal notranslate"><span class="pre">test_package</span></code> folder.
If a package is put in <code class="docutils literal notranslate"><span class="pre">editable</span></code> mode, and if it contains a <code class="docutils literal notranslate"><span class="pre">test_package</span></code> folder, the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> command
will still do a local build of the current package.</p>
</section>
<section id="revert-the-editable-mode">
<h2>Revert the editable mode<a class="headerlink" href="#revert-the-editable-mode" title="Link to this heading">¶</a></h2>
<p>In order to revert the editable mode just remove the link using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>remove<span class="w"> </span>--refs<span class="o">=</span>say/1.0
</pre></div>
</div>
<p>It will remove the link (the local directory won’t be affected) and all the packages consuming this
requirement will get it from the cache again.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Packages that are built while consuming an editable package in their upstreams can
generate binaries and packages that are incompatible with the released version of the
editable package. Avoid uploading these packages without re-creating them with the
in-cache version of all the libraries.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="local_package_development_flow.html" class="btn btn-neutral float-left" title="Package Development Flow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="package_layout.html" class="btn btn-neutral float-right" title="Understanding the Conan Package layout" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最后更新于 2月 17, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>