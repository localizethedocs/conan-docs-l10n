



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AutotoolsToolchain &mdash; conan 1.62.0 說明文件</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../../../../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../../../_static/css/search.css" type="text/css" />
        <link rel="index" title="索引"
              href="../../../../genindex.html"/>
        <link rel="search" title="搜尋" href="../../../../search.html"/>
    <link rel="top" title="conan 1.62.0 說明文件" href="../../../../index.html"/>
        <link rel="up" title="conan.tools.gnu" href="../gnu.html"/>
        <link rel="next" title="Autotools" href="autotools.html"/>
        <link rel="prev" title="AutotoolsDeps" href="autotoolsdeps.html"/>


 



</script>
<script type="text/javascript" src="../../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../../ltd-flyout.js"></script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/conan-logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uploading_packages.html">上傳軟體包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mastering.html">精通 Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../conanfile.html">conanfile.py</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../methods.html">Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../tools.html">tools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../cmake.html">conan.tools.cmake</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../gnu.html">conan.tools.gnu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google.html">conan.tools.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apple.html">conan.tools.apple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meson.html">conan.tools.meson</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel.html">conan.tools.intel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../env.html">conan.tools.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../system.html">conan.tools.system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../files.html">conan.tools.files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../layout.html">conan.tools.layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scm.html">conan.tools.scm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build.html">conan.tools.build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../android.html">conan.tools.android</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scons.html">conan.tools.scons</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dependencies.html">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html#output-and-running">Output and Running</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../generators.html">生成器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../build_helpers.html">Build helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../env_vars.html">環境變數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hooks.html">Hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">變更日誌</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p><a href="https://conan.io/#signUp" target="_blank">Sign up for release updates</a></p>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../../../../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div class="admonition warning wy-text-center">
            <p>This document is for a <b>"1.X" legacy</b> Conan version. <a href="https://docs.conan.io/2/">Click here to read the <b>Conan 2.0</b> documentation</a></p>
          </div>
                 
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../reference.html">Reference</a> &raquo;</li>
        
          <li><a href="../../../conanfile.html">conanfile.py</a> &raquo;</li>
        
          <li><a href="../../tools.html">tools</a> &raquo;</li>
        
          <li><a href="../gnu.html">conan.tools.gnu</a> &raquo;</li>
        
      <li>AutotoolsToolchain</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/reference/conanfile/tools/gnu/autotoolstoolchain.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->
          <!--<div class="admonition important">
            <p class="admonition-title">Announcement</p>
            <p>Recipe Hacking no. 2! Building on what we learnt during the first installment we will be working on more Conan 2.0 Migration! We'll start by reviewing some open pull requests and hopefully tackle a CMake example. <a
            href=https://jfrog.zoom.us/webinar/register/WN_grFhqH0yRBeIfJmBvQoPJw> Register here to attend.</a></p>
          </div>-->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="autotoolstoolchain">
<span id="conan-tools-gnu-autotools-toolchain"></span><h1>AutotoolsToolchain<a class="headerlink" href="#autotoolstoolchain" title="本標題的永久連結">¶</a></h1>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">Some of the features used in this section are still <strong>under development</strong>, while they are
recommended and usable and we will try not to break them in future releases, some breaking
changes might still happen if necessary to prepare for the <em>Conan 2.0 release</em>.</p>
</div>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.35.0">1.35.0</a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain</span></code> is the toolchain generator for Autotools. It will generate shell scripts containing
environment variable definitions that the autotools build system can understand.</p>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">This class will require very soon to define both the 「host」 and 「build」 profiles. It is very recommended to
start defining both profiles immediately to avoid future breaking. Furthermore, some features, like trying to
cross-compile might not work at all if the 「build」 profile is not provided.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain</span></code> generator can be used by name in conanfiles:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">conanfile.py</span><a class="headerlink" href="#id2" title="本原始碼的永久連結">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;AutotoolsToolchain&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">conanfile.txt</span><a class="headerlink" href="#id3" title="本原始碼的永久連結">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[generators]
AutotoolsToolchain
</pre></div>
</div>
</div>
<p>And it can also be fully instantiated in the conanfile <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutotoolsToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">AutotoolsToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain</span></code> will generate after a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> command the <em>conanautotoolstoolchain.sh</em> or <em>conanautotoolstoolchain.bat</em> files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>conanfile.py<span class="w"> </span><span class="c1"># default is Release</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>conanautotoolstoolchain.sh
<span class="c1"># or in Windows</span>
$<span class="w"> </span>conanautotoolstoolchain.bat
</pre></div>
</div>
<p>This generator will append information to the <code class="docutils literal notranslate"><span class="pre">CPPFLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span></code>,
<code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code> environment variables that translate the settings and options to the
corresponding build flags like <code class="docutils literal notranslate"><span class="pre">-stdlib=libstdc++</span></code>, <code class="docutils literal notranslate"><span class="pre">-std=gnu14</span></code>, architecture flags,
etc. It will also append the folder where the Conan generators are located to the
<code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code> environment variable.</p>
<p>This generator will also generate a file called <code class="docutils literal notranslate"><span class="pre">conanbuild.conf</span></code> containing two keys:</p>
<ul class="simple">
<li><strong>configure_args</strong>: Arguments to call the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script.</li>
<li><strong>make_args</strong>: Arguments to call the <code class="docutils literal notranslate"><span class="pre">make</span></code> script.</li>
<li><strong>autoreconf_args</strong>: Arguments to call the <code class="docutils literal notranslate"><span class="pre">autoreconf</span></code> script.</li>
</ul>
<p>The <a class="reference internal" href="autotools.html#conan-tools-gnu-build-helper"><span class="std std-ref">Autotools build helper</span></a> will use that <code class="docutils literal notranslate"><span class="pre">conanbuild.conf</span></code> file to seamlessly call
the configure and make script using these precalculated arguments.</p>
<p>It supports the following methods and attributes:</p>
<div class="section" id="constructor">
<h2>constructor<a class="headerlink" href="#constructor" title="本標題的永久連結">¶</a></h2>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conanfile</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">conanfile</span></code>: the current recipe object. Always use <code class="docutils literal notranslate"><span class="pre">self</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">namespace</span></code>: this argument avoids collisions when you have multiple toolchain calls in the same
recipe. By setting this argument, the <em>conanbuild.conf</em> file used to pass information to the build
helper will be named as: <em>&lt;namespace&gt;_conanbuild.conf</em>. The default value is <code class="docutils literal notranslate"><span class="pre">None</span></code> meaning that
the name of the generated file is <em>conanbuild.conf</em>. This namespace must be also set with the same
value in the constructor of the <a class="reference internal" href="autotools.html#conan-tools-gnu-build-helper"><span class="std std-ref">Autotools build helper</span></a> so that
it reads the information from the proper file.</li>
<li><code class="docutils literal notranslate"><span class="pre">prefix</span></code>: Folder to use for <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> argument (「/」 by default).</li>
</ul>
</div>
<div class="section" id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="本標題的永久連結">¶</a></h2>
<p>You can change some attributes before calling the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method if you want to change some of the precalculated
values:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutotoolsToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">AutotoolsToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">configure_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;--my_argument&quot;</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>configure_args</strong>: Additional arguments to be passed to the configure script.</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>By default the following arguments are passed:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">--prefix</span></code>: Takes <code class="docutils literal notranslate"><span class="pre">/</span></code> as default value.</li>
<li><code class="docutils literal notranslate"><span class="pre">--bindir=${prefix}/bin</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--sbindir=${prefix}/bin</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--libdir=${prefix}/lib</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--includedir=${prefix}/include</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--oldincludedir=${prefix}/include</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--datarootdir=${prefix}/res</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Also if the shared option exists it will add by default:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">--enable-shared</span></code>, <code class="docutils literal notranslate"><span class="pre">--disable-static</span></code> if <code class="docutils literal notranslate"><span class="pre">shared==True</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--disable-shared</span></code>, <code class="docutils literal notranslate"><span class="pre">--enable-static</span></code> if <code class="docutils literal notranslate"><span class="pre">shared==False</span></code></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><strong>make_args</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[]</span></code>): Additional arguments to be passed to the make script.</li>
<li><strong>autoreconf_args</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[&quot;--force&quot;,</span> <span class="pre">&quot;--install&quot;]</span></code>): Additional arguments to be passed to autoreconf.</li>
<li><strong>extra_defines</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[]</span></code>): Additional defines.</li>
<li><strong>extra_cxxflags</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[]</span></code>): Additional cxxflags.</li>
<li><strong>extra_cflags</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[]</span></code>): Additional cflags.</li>
<li><strong>extra_ldflags</strong> (Defaulted to <code class="docutils literal notranslate"><span class="pre">[]</span></code>): Additional ldflags.</li>
<li><strong>ndebug</strong>: 「NDEBUG」 if the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code> != <cite>Debug</cite>.</li>
<li><strong>gcc_cxx11_abi</strong>: 「_GLIBCXX_USE_CXX11_ABI」 if <code class="docutils literal notranslate"><span class="pre">gcc/libstdc++</span></code>.</li>
<li><strong>libcxx</strong>: Flag calculated from <code class="docutils literal notranslate"><span class="pre">settings.compiler.libcxx</span></code>.</li>
<li><strong>fpic</strong>: True/False from <code class="docutils literal notranslate"><span class="pre">options.fpic</span></code> if defined.</li>
<li><strong>cppstd</strong>: Flag from <code class="docutils literal notranslate"><span class="pre">settings.compiler.cppstd</span></code></li>
<li><strong>arch_flag</strong>: Flag from <code class="docutils literal notranslate"><span class="pre">settings.arch</span></code></li>
<li><strong>build_type_flags</strong>: Flags from <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code></li>
<li><strong>sysroot_flag</strong>: To pass the <code class="docutils literal notranslate"><span class="pre">--sysroot</span></code> flag to the compiler.</li>
<li><strong>apple_arch_flag</strong>: Only when cross-building with Apple systems. Flags from <code class="docutils literal notranslate"><span class="pre">settings.arch</span></code>.</li>
<li><strong>apple_isysroot_flag</strong>: Only when cross-building with Apple systems. Path to the root sdk.</li>
<li><strong>msvc_runtime_flag</strong>: Flag from <code class="docutils literal notranslate"><span class="pre">settings.compiler.runtime_type</span></code> when compiler is <code class="docutils literal notranslate"><span class="pre">msvc</span></code> or
<code class="docutils literal notranslate"><span class="pre">settings.compiler.runtime</span></code> when using the deprecated <code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span></code>.</li>
</ul>
<p>The following attributes are ready-only and will contain the calculated values for the current configuration and customized
attributes. Some recipes might need to read them to generate custom build files (not strictly Autotools) with the configuration:</p>
<ul class="simple">
<li><strong>defines</strong></li>
<li><strong>cxxflags</strong></li>
<li><strong>cflags</strong></li>
<li><strong>ldflags</strong></li>
</ul>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutotoolsToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">AutotoolsToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Customize the flags</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">extra_cxxflags</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;MyFlag&quot;</span><span class="p">]</span>

        <span class="c1"># Read the computed flags and use them (write custom files etc)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">defines</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">cxxflags</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">cflags</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">ldflags</span>
</pre></div>
</div>
<p>If you want to change the default values for <code class="docutils literal notranslate"><span class="pre">configure_args</span></code>, adjust the <code class="docutils literal notranslate"><span class="pre">cpp.package</span></code> object at the <code class="docutils literal notranslate"><span class="pre">layout()</span></code> method:</p>
<blockquote>
<div><div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="c1"># For bindir and sbindir takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">bindirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mybin&quot;</span><span class="p">]</span>
    <span class="c1"># For libdir takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">libdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mylib&quot;</span><span class="p">]</span>
    <span class="c1"># For includedir and oldincludedir takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">includedirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;myinclude&quot;</span><span class="p">]</span>
    <span class="c1"># For datarootdir takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">resdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;myres&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">It is <strong>not valid</strong> to change the self.cpp_info  at the <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="conf">
<h2>conf<a class="headerlink" href="#conf" title="本標題的永久連結">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain</span></code> is affected by these <a class="reference internal" href="../../../config_files/global_conf.html#global-conf"><span class="std std-ref">[conf]</span></a> variables:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">tools.build:cxxflags</span></code> list of extra C++ flags that will be used by <code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:cflags</span></code> list of extra of pure C flags that will be used by <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:sharedlinkflags</span></code> list of extra linker flags that will be used by <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:exelinkflags</span></code> list of extra linker flags that will be used by <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:linker_scripts</span></code> list of linker scripts, each of which will be prefixed with <code class="docutils literal notranslate"><span class="pre">-T</span></code> and added to <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>.
Only use this flag with linkers that supports specifying linker scripts with the <code class="docutils literal notranslate"><span class="pre">-T</span></code> flag, such as <code class="docutils literal notranslate"><span class="pre">ld</span></code>, <code class="docutils literal notranslate"><span class="pre">gold</span></code>, and <code class="docutils literal notranslate"><span class="pre">lld</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:defines</span></code> list of preprocessor definitions that will be used by <code class="docutils literal notranslate"><span class="pre">CPPFLAGS</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:sysroot</span></code> defines the <code class="docutils literal notranslate"><span class="pre">--sysroot</span></code> flag to the compiler.</li>
<li><code class="docutils literal notranslate"><span class="pre">tools.build:compiler_executables</span></code> (new in version 1.55) dict-like Python object which specifies the compiler as key
and the compiler executable path as value. Those keys will be mapped as follows:<ul>
<li><code class="docutils literal notranslate"><span class="pre">c</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CC</span></code> in <em>conanautotoolstoolchain.sh|bat</em> script.</li>
<li><code class="docutils literal notranslate"><span class="pre">cpp</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CXX</span></code> in <em>conanautotoolstoolchain.sh|bat</em> script.</li>
<li><code class="docutils literal notranslate"><span class="pre">cuda</span></code>: will set <code class="docutils literal notranslate"><span class="pre">NVCC</span></code> in <em>conanautotoolstoolchain.sh|bat</em> script.</li>
<li><code class="docutils literal notranslate"><span class="pre">fortran</span></code>: will set <code class="docutils literal notranslate"><span class="pre">FC</span></code> in <em>conanautotoolstoolchain.sh|bat</em> script.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="customizing-the-environment">
<h2>Customizing the environment<a class="headerlink" href="#customizing-the-environment" title="本標題的永久連結">¶</a></h2>
<p>If your <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> or <code class="docutils literal notranslate"><span class="pre">configure</span></code> scripts need some other environment variable rather than <code class="docutils literal notranslate"><span class="pre">CPPFLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">LDFLAGS</span></code>,
<code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span></code> or <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code>, you can customize it before calling the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method.
Call the <code class="docutils literal notranslate"><span class="pre">environment()</span></code> method to calculate the mentioned variables and then add the variables that you need.
The <code class="docutils literal notranslate"><span class="pre">environment()</span></code> method returns an <a class="reference internal" href="../env/environment.html#conan-tools-env-environment-model"><span class="std std-ref">Environment</span></a> object:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutotoolsToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">at</span> <span class="o">=</span> <span class="n">AutotoolsToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">at</span><span class="o">.</span><span class="n">environment</span><span class="p">()</span>
        <span class="n">env</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="s2">&quot;FOO&quot;</span><span class="p">,</span> <span class="s2">&quot;BAR&quot;</span><span class="p">)</span>
        <span class="n">at</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="managing-the-configure-args-make-args-and-autoreconf-args-attributes">
<h2>Managing the configure_args, make_args and autoreconf_args attributes<a class="headerlink" href="#managing-the-configure-args-make-args-and-autoreconf-args-attributes" title="本標題的永久連結">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain</span></code> provides some help methods so users can add/update/remove values defined in <code class="docutils literal notranslate"><span class="pre">configure_args</span></code>,
<code class="docutils literal notranslate"><span class="pre">make_args</span></code> and <code class="docutils literal notranslate"><span class="pre">autoreconf_args</span></code> (all of them lists of strings). Those methods are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">update_configure_args(updated_flags)</span></code> (since Conan 1.57): will change <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain.configure_args</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">update_make_args(updated_flags)</span></code> (since Conan 1.57): will change <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain.make_args</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">update_autoreconf_args(updated_flags)</span></code> (since Conan 1.57): will change <code class="docutils literal notranslate"><span class="pre">AutotoolsToolchain.autoreconf_args</span></code>.</li>
</ul>
<p>Where <code class="docutils literal notranslate"><span class="pre">updated_flags</span></code> is a dict-like Python object defining all the flags to change. It follows the next rules:</p>
<ul class="simple">
<li>Key-value are the flags names and their values, e.g., <code class="docutils literal notranslate"><span class="pre">{&quot;--enable-tools&quot;:</span> <span class="pre">no}</span></code> will be translated as <code class="docutils literal notranslate"><span class="pre">--enable-tools=no</span></code>.</li>
<li>If that key has no value, then it will be an empty string, e.g., <code class="docutils literal notranslate"><span class="pre">{&quot;--disable-verbose&quot;:</span> <span class="pre">&quot;&quot;}</span></code> will be translated as <code class="docutils literal notranslate"><span class="pre">--disable-verbose</span></code>.</li>
<li>If the key value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, it means that you want to remove that flag from the <code class="docutils literal notranslate"><span class="pre">xxxxxx_args</span></code> (notice that it could
be <code class="docutils literal notranslate"><span class="pre">configure_args</span></code>, <code class="docutils literal notranslate"><span class="pre">make_args</span></code> or <code class="docutils literal notranslate"><span class="pre">autoreconf_args</span></code>), e.g., <code class="docutils literal notranslate"><span class="pre">{&quot;--force&quot;:</span> <span class="pre">None}</span></code> will remove that flag from the final result.</li>
</ul>
<p>In a nutshell, you will:</p>
<ul class="simple">
<li><strong>Add arguments</strong>: if the given flag in <code class="docutils literal notranslate"><span class="pre">updated_flags</span></code> does not already exist in <code class="docutils literal notranslate"><span class="pre">xxxxxx_args</span></code>.</li>
<li><strong>Update arguments</strong>: if the given flag in <code class="docutils literal notranslate"><span class="pre">updated_flags</span></code> already exists in attribute <code class="docutils literal notranslate"><span class="pre">xxxxxx_args</span></code>.</li>
<li><strong>Remove arguments</strong>: if the given flag in <code class="docutils literal notranslate"><span class="pre">updated_flags</span></code> already exists in <code class="docutils literal notranslate"><span class="pre">xxxxxx_args</span></code> and it’s passed with <code class="docutils literal notranslate"><span class="pre">None</span></code> as value.</li>
</ul>
<p>For instance:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutotoolsToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">at</span> <span class="o">=</span> <span class="n">AutotoolsToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">at</span><span class="o">.</span><span class="n">update_configure_args</span><span class="p">({</span>
            <span class="s2">&quot;--new-super-flag&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="c1"># add new flag &#39;--new-super-flag&#39;</span>
            <span class="s2">&quot;--host&quot;</span><span class="p">:</span> <span class="s2">&quot;my-gnu-triplet&quot;</span><span class="p">,</span>  <span class="c1"># update flag &#39;--host=my-gnu-triplet&#39;</span>
            <span class="s2">&quot;--force&quot;</span><span class="p">:</span> <span class="kc">None</span>  <span class="c1"># remove existing &#39;--force&#39; flag</span>
        <span class="p">})</span>
        <span class="n">at</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autotools.html" class="btn btn-neutral float-right" title="Autotools" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="autotoolsdeps.html" class="btn btn-neutral" title="AutotoolsDeps" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2022, JFrog.
      最後更新於 10月 27, 2025。
      <span><a href="#" class="ot-sdk-show-settings">Cookies Settings</a></span>
    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.62.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../../../../_static/js/modernizr.min.js"></script>
  <script src="../../../../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.62");
  </script>


 


</body>
</html>