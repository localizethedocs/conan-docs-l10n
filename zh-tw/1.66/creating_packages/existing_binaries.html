<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Packaging Existing Binaries &mdash; conan 1.66.0 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/conan.css?v=f9087e22" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/creating_packages/existing_binaries.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=bb53edd0"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=d9a6981e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="Understanding Packaging" href="understand_packaging.html" />
    <link rel="prev" title="Recipe and Sources in the Same Repo" href="package_repo.html" />


 



</script>
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.66
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../creating_packages.html">Creating Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="external_repo.html">Recipe and Sources in a Different Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_repo.html">Recipe and Sources in the Same Repo</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Packaging Existing Binaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packaging-pre-built-binaries">Packaging Pre-built Binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-and-packaging-pre-built-binaries">Downloading and Packaging Pre-built Binaries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="understand_packaging.html">Understanding Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="define_abi_compatibility.html">定義軟體包 ABI 相容性</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_information.html">定義軟體包資訊</a></li>
<li class="toctree-l2"><a class="reference internal" href="toolchains.html">Toolchains</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspecting_packages.html">Inspecting Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_approaches.html">Packaging Approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_tools.html">Package Creator Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">上傳軟體包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">精通 Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #c6ac58;background-color: #f7ecc6;padding: 3px">
              <p>Conan Center has stopped receiving updates for Conan 1.x packages. A new https://center2.conan.io Conan 2-only remote is now available. <a href="https://blog.conan.io/2024/09/30/Conan-Center-will-stop-receiving-updates-for-Conan-1.html">Read the blog post</a></p>
            </div>
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../creating_packages.html">Creating Packages</a></li>
      <li class="breadcrumb-item active">Packaging Existing Binaries</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/creating_packages/existing_binaries.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="packaging-existing-binaries">
<span id="existing-binaries"></span><h1>Packaging Existing Binaries<a class="headerlink" href="#packaging-existing-binaries" title="Link to this heading"></a></h1>
<p>There are specific scenarios in which it is necessary to create packages from existing binaries, for example from 3rd
parties or binaries previously built by another process or team that are not using Conan. Under these circumstances building from sources is
not what you want. You should package the local files in the following situations:</p>
<blockquote>
<div><ul class="simple">
<li><p>When you cannot build the packages from sources (when only pre-built binaries are available).</p></li>
<li><p>When you are developing your package locally and you want to export the built artifacts to the local
cache.
As you don’t want to rebuild again (clean copy) your artifacts, you don’t want to call
<strong class="command">conan create</strong>.
This method will keep your build cache if you are using an IDE or calling locally to the
<strong class="command">conan build</strong> command.</p></li>
</ul>
</div></blockquote>
<section id="packaging-pre-built-binaries">
<h2>Packaging Pre-built Binaries<a class="headerlink" href="#packaging-pre-built-binaries" title="Link to this heading"></a></h2>
<p>Running the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method, when the files you want to package are local, results in no added value as the files
copied from the user folder cannot be reproduced. For this scenario, run <strong class="command">conan export-pkg</strong> command directly.</p>
<p>A Conan recipe is still required, but is very simple and will only include the package meta information. A basic recipe can be created with the <strong class="command">conan new</strong> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>hello/0.1<span class="w"> </span>--bare
</pre></div>
</div>
<p>This will create and store the following package recipe in the local cache:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HelloConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collect_libs</span><span class="p">()</span>
</pre></div>
</div>
<p>The provided <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method scans the package files to provide end-users with
the name of the libraries to link to. This method can be further customized to provide additional build
flags (typically dependent on the settings). The default <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> applies as follows: it
defines headers in the 「include」 folder, libraries in the 「lib」 folder, and binaries in the 「bin」 folder. A different
package layout can be defined in the <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method.</p>
<p>This package recipe can be also extended to provide support for more configurations (for example,
adding options: shared/static, or using different settings), adding dependencies (<code class="docutils literal notranslate"><span class="pre">requires</span></code>),
and more.</p>
<p>Based on the above, we can assume that our current directory contains a <em>lib</em> folder with a number binaries for this
「hello」 library <em>libhello.a</em>, compatible for example with Windows MinGW (gcc) version 4.9:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>export-pkg<span class="w"> </span>.<span class="w"> </span>hello/0.1@myuser/testing<span class="w">  </span>-s<span class="w"> </span><span class="nv">os</span><span class="o">=</span>Windows<span class="w"> </span>-s<span class="w"> </span><span class="nv">compiler</span><span class="o">=</span>gcc<span class="w"> </span>-s<span class="w"> </span>compiler.version<span class="o">=</span><span class="m">4</span>.9<span class="w"> </span>...
</pre></div>
</div>
<p>Having a <em>test_package</em> folder is still highly recommended for testing the package locally before
upload. As we don’t want to build the package from the sources, the flow would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>hello/0.1<span class="w"> </span>--bare<span class="w"> </span>--test
<span class="c1"># customize test_package project</span>
<span class="c1"># customize package recipe if necessary</span>
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>my/path/to/binaries
$<span class="w"> </span>conan<span class="w"> </span>export-pkg<span class="w"> </span>PATH/TO/conanfile.py<span class="w"> </span>hello/0.1@myuser/testing<span class="w">  </span>-s<span class="w"> </span><span class="nv">os</span><span class="o">=</span>Windows<span class="w"> </span>-s<span class="w"> </span><span class="nv">compiler</span><span class="o">=</span>gcc<span class="w"> </span>-s<span class="w"> </span>compiler.version<span class="o">=</span><span class="m">4</span>.9<span class="w"> </span>...
$<span class="w"> </span>conan<span class="w"> </span><span class="nb">test</span><span class="w"> </span>PATH/TO/test_package/conanfile.py<span class="w"> </span>hello/0.1@myuser/testing<span class="w"> </span>-s<span class="w"> </span><span class="nv">os</span><span class="o">=</span>Windows<span class="w"> </span>-s<span class="w"> </span><span class="nv">compiler</span><span class="o">=</span>gcc<span class="w"> </span>-s<span class="w"> </span>...
</pre></div>
</div>
<p>The last two steps can be repeated for any number of configurations.</p>
</section>
<section id="downloading-and-packaging-pre-built-binaries">
<h2>Downloading and Packaging Pre-built Binaries<a class="headerlink" href="#downloading-and-packaging-pre-built-binaries" title="Link to this heading"></a></h2>
<p>In this scenario, creating a complete Conan recipe, with the detailed retrieval of the binaries could be
the preferred method, because it is reproducible, and the original binaries might be traced.
Follow our sample recipe for this purpose:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HelloConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">os</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">compiler</span> <span class="o">==</span> <span class="s2">&quot;Visual Studio&quot;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;https://&lt;someurl&gt;/downloads/hello_binary</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">.zip&quot;</span>
                   <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">version</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">build_type</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="o">...</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="o">...</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Binary does not exist for these settings&quot;</span><span class="p">)</span>
        <span class="n">tools</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="c1"># assume package as-is, but you can also copy specific files or rearrange</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># still very useful for package consumers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Typically, pre-compiled binaries come for different configurations, so the only task that the
<code class="docutils literal notranslate"><span class="pre">build()</span></code> method has to implement is to map the <code class="docutils literal notranslate"><span class="pre">settings</span></code> to the different URLs.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<ul class="simple">
<li><p>This is a standard Conan package even if the binaries are being retrieved from elsewhere.
The <strong>recommended approach</strong> is to use <strong class="command">conan create</strong>, and include a small consuming project
in addition to the above recipe, to test locally and then proceed to upload the Conan package with the binaries to
the Conan remote with <strong class="command">conan upload</strong>.</p></li>
<li><p>The same building policies apply. Having a recipe fails if no Conan packages are
created, and the <strong class="command">--build</strong> argument is not defined. A typical approach for this kind of
packages could be to define a <strong class="command">build_policy=&quot;missing&quot;</strong>, especially if the URLs are also
under the team control. If they are external (on the internet), it could be better to create the
packages and store them on your own Conan server, so that the builds do not rely on third party URL
being available.</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="package_repo.html" class="btn btn-neutral float-left" title="Recipe and Sources in the Same Repo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="understand_packaging.html" class="btn btn-neutral float-right" title="Understanding Packaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 10月 27, 2025。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>