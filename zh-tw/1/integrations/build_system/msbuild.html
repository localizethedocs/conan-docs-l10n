<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSBuild (Visual Studio) &mdash; conan 1.65.0 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=f9087e22" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/integrations/build_system/msbuild.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c1e5563f"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="Autotools: configure/make" href="makefile.html" />
    <link rel="prev" title="Find Packages" href="cmake/find_packages.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploading_packages.html">上傳軟體包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mastering.html">精通 Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending Conan</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../integrations.html">Integrations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../compilers.html">Compilers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../build_system.html">Build systems</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cmake.html"> CMake</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"> MSBuild (Visual Studio)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#with-visual-studio-generator">With <em>visual_studio</em> generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-an-existing-visual-studio-project">Build an existing Visual Studio project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#toolsets">Toolsets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="makefile.html">Autotools: configure/make</a></li>
<li class="toctree-l3"><a class="reference internal" href="ninja.html">Ninja, NMake, Borland</a></li>
<li class="toctree-l3"><a class="reference internal" href="pkg_config_pc_files.html"><strong class="command">pkg-config</strong> and <em>.pc</em> files</a></li>
<li class="toctree-l3"><a class="reference internal" href="boost_build.html"> Boost Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="b2.html"> B2 (Boost Build)</a></li>
<li class="toctree-l3"><a class="reference internal" href="qmake.html">QMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="premake.html"> Premake</a></li>
<li class="toctree-l3"><a class="reference internal" href="xmake.html"> XMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="make.html">Make</a></li>
<li class="toctree-l3"><a class="reference internal" href="qbs.html">qbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="meson.html"> Meson Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="scons.html"> SCons</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcc.html">Compilers on command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="bazel.html"> Bazel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ides.html">IDEs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ci.html">CI Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cross_platform.html">Other Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vcs.html">Version Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom.html">Custom integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linting.html">Linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deployment.html">Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #c6ac58;background-color: #f7ecc6;padding: 3px">
              <p>Conan Center has stopped receiving updates for Conan 1.x packages. A new https://center2.conan.io Conan 2-only remote is now available. <a href="https://blog.conan.io/2024/09/30/Conan-Center-will-stop-receiving-updates-for-Conan-1.html">Read the blog post</a></p>
            </div>
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../integrations.html">Integrations</a></li>
          <li class="breadcrumb-item"><a href="../build_system.html">Build systems</a></li>
      <li class="breadcrumb-item active"> MSBuild (Visual Studio)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/integrations/build_system/msbuild.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="visual-logo-msbuild-visual-studio">
<span id="msbuild-integration"></span><h1><img alt="visual_logo" src="../../_images/conan-visual-studio-logo.png" /> MSBuild (Visual Studio)<a class="headerlink" href="#visual-logo-msbuild-visual-studio" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This is a <strong>deprecated</strong> feature. Please refer to the <a class="reference internal" href="../../conan_v2.html#conan2-migration-guide"><span class="std std-ref">Migration Guidelines</span></a>
to find the feature that replaced this one.</p>
<p>The new, <strong>under development</strong> Using the <code class="docutils literal notranslate"><span class="pre">conan.tools.microsoft</span></code> tools: <code class="docutils literal notranslate"><span class="pre">MSBuildDeps</span></code>, <code class="docutils literal notranslate"><span class="pre">MSBuildToolchain</span></code> and
<code class="docutils literal notranslate"><span class="pre">MSBuild</span></code> helpers to generate properties files for your project, containing information about the project dependencies
and toolchain. Go to <a class="reference internal" href="../../reference/conanfile/tools/microsoft.html#conan-tools-microsoft"><span class="std std-ref">conan.tools.microsoft</span></a> for more information. While they are recommended and usable and
we will try not to break them in future releases, some breaking changes might still happen if necessary to prepare for
the <em>Conan 2.0 release</em>.</p>
</div>
<p>If you are using CMake to generate your Visual Studio projects, this is not the right section, go to <a class="reference internal" href="cmake.html#cmake"><span class="std std-ref"> CMake</span></a> instead.
This section is about native integration with Microsoft MSBuild, using properties files.</p>
<p>Conan can be integrated with <strong>MSBuild</strong> natively, the build system of Visual Studio by:</p>
<ul class="simple">
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">visual_studio</span></code> or <code class="docutils literal notranslate"><span class="pre">visual_studio_multi</span></code> generators to create a MSBuild properties <em>conanbuildinfo.props</em> file.</p></li>
</ul>
<section id="with-visual-studio-generator">
<h2>With <em>visual_studio</em> generator<a class="headerlink" href="#with-visual-studio-generator" title="Link to this heading"></a></h2>
<p>Use the <strong>visual_studio</strong> generator, or <strong>visual_studio_multi</strong>, if you are maintaining your Visual Studio projects, and want to use Conan to to tell Visual Studio how to find your third-party dependencies.</p>
<p>You can use the <strong>visual_studio</strong> generator to manage your requirements via your <em>Visual Studio</em>  project.</p>
<p>This generator creates a <a class="reference external" href="https://docs.microsoft.com/en-us/visualstudio/ide/managing-project-and-solution-properties?view=vs-2017">Visual Studio project properties</a> file, with all the <em>include paths</em>, <em>lib paths</em>, <em>libs</em>, <em>flags</em> etc., that can be imported in your project.</p>
<p>Open <code class="docutils literal notranslate"><span class="pre">conanfile.txt</span></code> and change (or add) the <code class="docutils literal notranslate"><span class="pre">visual_studio</span></code> generator:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[requires]
poco/1.9.4

[generators]
visual_studio
</pre></div>
</div>
<p>安裝要求項：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>Go to your Visual Studio project, and open the <strong>Property Manager</strong> (usually in <strong>View -&gt; Other Windows -&gt; Property Manager</strong>).</p>
<img alt="../../_images/conan-property_manager.png" src="../../_images/conan-property_manager.png" />
<p>Click the <strong>+</strong> icon and select the generated <code class="docutils literal notranslate"><span class="pre">conanbuildinfo.props</span></code> file:</p>
<img alt="../../_images/conan-property_manager2.png" src="../../_images/conan-property_manager2.png" />
<p>Build your project as usual.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>Remember to set your project’s architecture and build type accordingly, explicitly or implicitly, when issuing the
<strong class="command">conan install</strong> command. If these values don’t match, your build will probably fail.</p>
<p>e.g. <strong>Release/x64</strong></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">也參考</p>
<p>Check <a class="reference internal" href="../../reference/generators/visualstudio.html#visualstudio-generator"><span class="std std-ref">visual_studio</span></a> for the complete reference.</p>
</div>
</section>
<section id="build-an-existing-visual-studio-project">
<span id="building-visual-project"></span><h2>Build an existing Visual Studio project<a class="headerlink" href="#build-an-existing-visual-studio-project" title="Link to this heading"></a></h2>
<p>You can build an existing Visual Studio from your <code class="docutils literal notranslate"><span class="pre">build()</span></code> method using the <a class="reference internal" href="../../reference/build_helpers/visual_studio.html#msbuild"><span class="std std-ref">MSBuild()</span></a> build helper.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">MSBuild</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msbuild</span> <span class="o">=</span> <span class="n">MSBuild</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">msbuild</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s2">&quot;MyProject.sln&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="toolsets">
<h2>Toolsets<a class="headerlink" href="#toolsets" title="Link to this heading"></a></h2>
<p>You can use the sub-setting <code class="docutils literal notranslate"><span class="pre">toolset</span></code> of the Visual Studio compiler to specify a custom toolset.
It will be automatically applied when using the <code class="docutils literal notranslate"><span class="pre">CMake()</span></code> and <code class="docutils literal notranslate"><span class="pre">MSBuild()</span></code> build helpers.
The toolset can also be specified manually in these build helpers with the <code class="docutils literal notranslate"><span class="pre">toolset</span></code> parameter.</p>
<p>By default, Conan will not generate a new binary package if the specified <code class="docutils literal notranslate"><span class="pre">compiler.toolset</span></code>
matches an already generated package for the corresponding <code class="docutils literal notranslate"><span class="pre">compiler.version</span></code>.
Check the <a class="reference internal" href="../../reference/conanfile/methods.html#method-package-id"><span class="std std-ref">package_id()</span></a> reference to learn more.</p>
<div class="admonition seealso">
<p class="admonition-title">也參考</p>
<p>Check the <a class="reference internal" href="../../reference/build_helpers/cmake.html#cmake-reference"><span class="std std-ref">CMake()</span></a> reference section for more info.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmake/find_packages.html" class="btn btn-neutral float-left" title="Find Packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="makefile.html" class="btn btn-neutral float-right" title="Autotools: configure/make" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 10月 27, 2025。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>