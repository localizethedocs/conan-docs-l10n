<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Android Studio &mdash; conan 1.65.0 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=f9087e22" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/integrations/ide/android_studio.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c1e5563f"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="YouCompleteMe (vim)" href="youcompleteme.html" />
    <link rel="prev" title="Apple/Xcode" href="xcode.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">介紹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_packages.html">使用軟體包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploading_packages.html">上傳軟體包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mastering.html">精通 Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending Conan</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../integrations.html">Integrations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../compilers.html">Compilers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_system.html">Build systems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ides.html">IDEs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="visual_studio.html"> Visual Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="clion.html"> CLion</a></li>
<li class="toctree-l3"><a class="reference internal" href="xcode.html">  Apple/Xcode</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"> Android Studio</a></li>
<li class="toctree-l3"><a class="reference internal" href="youcompleteme.html">YouCompleteMe (vim)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ci.html">CI Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cross_platform.html">Other Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vcs.html">版本控制系統</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom.html">Custom integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linting.html">Linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deployment.html">Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #c6ac58;background-color: #f7ecc6;padding: 3px">
              <p>Conan Center has stopped receiving updates for Conan 1.x packages. A new https://center2.conan.io Conan 2-only remote is now available. <a href="https://blog.conan.io/2024/09/30/Conan-Center-will-stop-receiving-updates-for-Conan-1.html">Read the blog post</a></p>
            </div>
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../integrations.html">Integrations</a></li>
          <li class="breadcrumb-item"><a href="../ides.html">IDEs</a></li>
      <li class="breadcrumb-item active"> Android Studio</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/integrations/ide/android_studio.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="android-studio-logo-android-studio">
<span id="android-studio"></span><h1><img alt="android_studio_logo" src="../../_images/conan-android_studio_logo.png" /> Android Studio<a class="headerlink" href="#android-studio-logo-android-studio" title="Link to this heading"></a></h1>
<p>You can use Conan to <a class="reference internal" href="../../systems_cross_building/cross_building.html#cross-building-android"><span class="std std-ref">cross-build your libraries for Android</span></a> with different architectures.
If you are using Android Studio for your Android application development, you can integrate Conan to automate the
library building for the different architectures that you want to support in your project.</p>
<p>Here is an example of how to integrate the <code class="docutils literal notranslate"><span class="pre">libpng</span></code> Conan package library in an Android application, but any library
that can be cross-compiled to Android could be used using the same procedure.</p>
<p>We are going to start from the 「Hello World」 wizard application and then will add it the <code class="docutils literal notranslate"><span class="pre">libpng</span></code> C library:</p>
<ol class="arabic simple">
<li><p>Follow the <a class="reference internal" href="../../systems_cross_building/cross_building.html#cross-building-android"><span class="std std-ref">cross-build your libraries for Android</span></a> guide to create
a standalone toolchain and create a profile named <code class="docutils literal notranslate"><span class="pre">android_21_arm_clang</span></code> for Android.
You can also use the NDK that the Android Studio installs.</p></li>
<li><p>Create a new Android Studio project and include C++ support.</p></li>
</ol>
<blockquote>
<div><p><img alt="wizard1" src="../../_images/conan-wizard1.png" /></p>
</div></blockquote>
<p>3. Select your API level and target. The arch and api level have to match with the standalone
toolchain created in step 1.</p>
<blockquote>
<div><p><img alt="wizard2" src="../../_images/conan-wizard2.png" /></p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Add an empty Activity and name it.</p></li>
</ol>
<blockquote>
<div><p><img alt="wizard3" src="../../_images/conan-wizard3.png" /></p>
<p><img alt="wizard4" src="../../_images/conan-wizard4.png" /></p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Select the C++ standard</p></li>
</ol>
<blockquote>
<div><p><img alt="wizard5" src="../../_images/conan-wizard5.png" /></p>
</div></blockquote>
<p>6. Change to the <cite>project view</cite> and in the <cite>app</cite> folder create a <code class="docutils literal notranslate"><span class="pre">conanfile.txt</span></code> with
the following contents:</p>
<p><strong>conanfile.txt</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[requires]
libpng/1.6.23@lasote/stable

[generators]
cmake
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file from the app folder and replace the contents with:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cmake_minimum_required(VERSION 3.4.1)

include(${CMAKE_CURRENT_SOURCE_DIR}/conan_build/conanbuildinfo.cmake)
set(CMAKE_CXX_COMPILER_VERSION &quot;5.0&quot;) # Unknown miss-detection of the compiler by CMake
conan_basic_setup(TARGETS)

add_library(native-lib SHARED src/main/cpp/native-lib.cpp)
target_link_libraries(native-lib CONAN_PKG::libpng)
</pre></div>
</div>
<p>8. Open the <em>app/build.gradle</em> file. We are configuring the architectures we want to build, specifying adding a new task <code class="docutils literal notranslate"><span class="pre">conanInstall</span></code>
that will call <strong class="command">conan install</strong> to install the requirements:</p>
<ul class="simple">
<li><p>In the defaultConfig section, append:</p></li>
</ul>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">ndk</span><span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="c1">// Specifies the ABI configurations of your native</span>
<span class="w">   </span><span class="c1">// libraries Gradle should build and package with your APK.</span>
<span class="w">   </span><span class="n">abiFilters</span><span class="w"> </span><span class="s1">&#39;armeabi-v7a&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>After the android block:</p></li>
</ul>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="w"> </span><span class="nf">conanInstall</span><span class="o">(</span><span class="nl">type:</span><span class="w"> </span><span class="n">Exec</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">executable</span><span class="w"> </span><span class="s2">&quot;conan&quot;</span><span class="w"> </span><span class="c1">// on MacOSX may need to specify the absolute path, i.e. `/usr/local/bin/conan`</span>
<span class="w">    </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;install&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;conanfile.txt&quot;</span><span class="o">,</span>
<span class="w">            </span><span class="s2">&quot;--profile=android_21_arm_clang&quot;</span><span class="o">,</span>
<span class="w">            </span><span class="s2">&quot;--install-folder=${new File(&quot;</span><span class="n">conan_build</span><span class="s2">&quot;).tap { mkdirs() }}&quot;</span><span class="o">,</span>
<span class="w">            </span><span class="s2">&quot;--build=missing&quot;</span><span class="o">]</span>
<span class="w">    </span><span class="n">standardInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="na">in</span>
<span class="o">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Make your Android build depend on the NDK build, so Conan install is called each time you’re building the Android app. In the same <em>.gradle</em> file:</p></li>
</ol>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">preBuild</span><span class="o">.</span><span class="na">dependsOn</span><span class="w"> </span><span class="n">conanInstall</span>
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li><p>Finally open the default example cpp library in <code class="docutils literal notranslate"><span class="pre">app/src/main/cpp/native-lib.cpp</span></code> and include some lines using your library.</p></li>
</ol>
<blockquote>
<div><p>Be careful with the JNICALL name if you used another app name in the wizard:</p>
</div></blockquote>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;jni.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;png.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;zlib.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sstream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span>
<span class="n">JNIEXPORT</span><span class="w"> </span><span class="n">jstring</span><span class="w"> </span><span class="n">JNICALL</span>
<span class="n">Java_com_jfrog_myconanandroidcppapp_MainActivity_stringFromJNI</span><span class="p">(</span>
<span class="w">       </span><span class="n">JNIEnv</span><span class="w"> </span><span class="o">*</span><span class="n">env</span><span class="p">,</span>
<span class="w">       </span><span class="n">jobject</span><span class="w"> </span><span class="cm">/* this */</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">ostringstream</span><span class="w"> </span><span class="n">oss</span><span class="p">;</span>
<span class="w">   </span><span class="n">oss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Compiled with libpng: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">PNG_LIBPNG_VER_STRING</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">   </span><span class="n">oss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Running with libpng: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">png_libpng_ver</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">   </span><span class="n">oss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Compiled with zlib: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">ZLIB_VERSION</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">   </span><span class="n">oss</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Running with zlib: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">zlib_version</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">env</span><span class="o">-&gt;</span><span class="n">NewStringUTF</span><span class="p">(</span><span class="n">oss</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">c_str</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Build your project normally. Conan will create a <code class="docutils literal notranslate"><span class="pre">conan</span></code> folder with a folder for each different architecture you have specified in the abiFilters with a <code class="docutils literal notranslate"><span class="pre">conanbuildinfo.cmake</span></code> file.</p>
<p>Then run the app using an x86 emulator for best performance:</p>
<p><img alt="wizard9" src="../../_images/conan-wizard9.png" /></p>
<div class="admonition seealso">
<p class="admonition-title">也參考</p>
<p>Check the section <a class="reference internal" href="../../systems_cross_building/cross_building.html#cross-building-android"><span class="std std-ref">Linux/Windows/macOS to Android</span></a> to read more about cross-building for Android.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="xcode.html" class="btn btn-neutral float-left" title="Apple/Xcode" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="youcompleteme.html" class="btn btn-neutral float-right" title="YouCompleteMe (vim)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 2月 16, 2026。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>