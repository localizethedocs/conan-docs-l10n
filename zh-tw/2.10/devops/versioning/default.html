<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Default versioning approach &mdash; conan 2.10.3 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/devops/versioning/default.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=8f228267"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="Handling version ranges and pre-releases" href="resolve_prereleases.html" />
    <link rel="prev" title="Versioning" href="versioning.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.10
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">簡介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ci_tutorial/tutorial.html">CI 教學</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../devops.html">開發運維指南</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../using_conancenter.html">Using ConanCenter packages in production environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops_local_recipes_index.html">Local Recipes Index Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup_sources/sources_backup.html">Backing up third-party sources with Conan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata.html">Managing package metadata files</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="versioning.html">Versioning</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Default versioning approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="resolve_prereleases.html">Handling version ranges and pre-releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../save_restore.html">Save and restore packages from/to the cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vendoring.html">Vendoring dependencies in Conan packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package_promotions.html">Package promotions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">範例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../incubating.html">孵化中的功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../devops.html">開發運維指南</a></li>
          <li class="breadcrumb-item"><a href="versioning.html">Versioning</a></li>
      <li class="breadcrumb-item active">Default versioning approach</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/devops/versioning/default.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="default-versioning-approach">
<span id="devops-versioning-default"></span><h1>Default versioning approach<a class="headerlink" href="#default-versioning-approach" title="Link to this heading">¶</a></h1>
<p>When doing changes to the source code of a package, and creating such a package, one good practice is to increase the version
of the package to represent the scope and impact of those changes. The 「semver」 standard specification defines a <code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR.PATCH</span></code>
versioning approach with a specific meaning for changing each digit.</p>
<p>Conan implements versioning based on the 「semver」 specification, but with some extended capabilities that were demanded by the C and C++
ecosystems:</p>
<ul class="simple">
<li><p>Conan versions can have any number of digits, like <code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR.PATH.MICRO.SUBMICRO...</span></code></p></li>
<li><p>Conan versions can contain also letters, not only digits, and they are also ordered in alphabetical order, so <code class="docutils literal notranslate"><span class="pre">1.a.2</span></code> is older tha <code class="docutils literal notranslate"><span class="pre">1.b.1</span></code> for example.</p></li>
<li><p>The version ranges can be equally defined for any number of digits, like <code class="docutils literal notranslate"><span class="pre">dependency/[&gt;=1.0.0.0</span> <span class="pre">&lt;1.0.0.10]</span></code></p></li>
</ul>
<p>Read the <a class="reference internal" href="../../tutorial/versioning.html#tutorial-versioning"><span class="std std-ref">introduction to versioning</span></a> in the tutorial.</p>
<p>But one very different aspect of C and C++ building model compared to other languages is how the dependencies affect the
binaries of the consumers requiring them. This is described in the <a class="reference internal" href="../../reference/binary_model/dependencies.html#reference-binary-model-dependencies"><span class="std std-ref">Conan binary model</span></a> reference.</p>
<p>Basically, when some package changes its version, this can have different effects on the 「consumers」 of this package, requiring such
「consumers」 to do a rebuild from source or not to integrate the new dependency changes. This also depends on the package types,
as the logic changes when linking a shared library or a static library. Conan binary model with <code class="docutils literal notranslate"><span class="pre">dependency</span> <span class="pre">traits</span></code>, <code class="docutils literal notranslate"><span class="pre">package_type</span></code>,
and the <code class="docutils literal notranslate"><span class="pre">package_id</span></code> modes is able to represent this logic and compute efficiently what needs to be rebuilt from source.</p>
<p>The default Conan behavior can give some hints of what version changes would be recommended when doing different changes to the packages
source code:</p>
<ul class="simple">
<li><p>Not modifying the version typically means that we want Conan automatic
<strong>recipe revisions</strong> to handle that. A common use case is when the C/C++ source code is not modified at all, and only changes
to the <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> recipe are done. As the source code is the same, we might want to keep the same version number, and
just have a new revision of that version.</p></li>
<li><p><strong>Patch</strong>: Increasing the <strong>patch</strong> version of a package means that only internal changes were done, in practice it means change to files
that are not public headers of the package. This 「patch」 version can avoid having to re-build consumers of this package, for
example if the current package getting a new 「patch」 version is a static library, all other packages that implement static
libraries that depend on this one do not need to be re-built from source, as depending on the same public interface headers
guarantee the same binary.</p></li>
<li><p><strong>Minor</strong>: If changes are done to package public headers, in an API source compatible way, then the recommendation would be to increase
the <strong>minor</strong> verson of a package. That means that other packages that depend on it will be able to compile without issues,
but as there were modifications in public headers (that could contain C++ templates or other things that could be inlined in
the consumer packages), then those consumer packages need to be rebuilt from source to incorporate these changes.</p></li>
<li><p><strong>Major</strong>: If API breaking changes are done to the package public headers, then increasing the <strong>major</strong> version is recommended. As the
most common recommended version-range is something like <code class="docutils literal notranslate"><span class="pre">dependency/[&gt;1.0</span> <span class="pre">&lt;2]</span></code>, where the next major is excluded, that means
that publishing these new versions will not break existing consumers, because they will not be used at all by those consumers,
because their version ranges will exclude them. It will be necessary to modify the consumers recipes and source code (to fix
the API breaking changes) to be able to use the new major version.</p></li>
</ul>
<p>Note that while this is close to the standard 「semver」 definition of version and version ranges, the C/C++ compilation model
needs to introduce a new side effect, that of 「needing to rebuild the consumers」, following the logic explained above in the
<code class="docutils literal notranslate"><span class="pre">embed</span></code> and <code class="docutils literal notranslate"><span class="pre">non_embed</span></code> cases.</p>
<p>This is just the default recommended versioning approach, but Conan allows to change these defaults, as it implements an extension of the 「semver」 standard that allows any number of digits,
letters, etc, and it also allows to change the <code class="docutils literal notranslate"><span class="pre">package_id</span></code> modes to define how different versions of the dependencies affect
the consumers binaries. See <a class="reference internal" href="../../reference/binary_model/custom_compatibility.html#reference-binary-model-custom-compatibility-dependencies"><span class="std std-ref">how to customize the dependencies package_id modes</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p><strong>最佳實踐</strong></p>
<ul class="simple">
<li><p>It is not recommended to use other package reference fields, as the <code class="docutils literal notranslate"><span class="pre">user</span></code> and <code class="docutils literal notranslate"><span class="pre">channel</span></code> to represent changes in the source code,
or other information like the git branch, as this becomes 「viral」 requiring changes in the <code class="docutils literal notranslate"><span class="pre">requires</span></code> of the consumers. Furthermore,
they don’t implement any logic in the build model with respect to which consumers need to be rebuilt.</p></li>
<li><p>The recommended approach is to use versioning and multiple server repositories to host the different packages, so they don’t interfere
with other builds, read <a class="reference internal" href="../../ci_tutorial/tutorial.html#ci-tutorial"><span class="std std-ref">the Continuous Integration tutorial</span></a> for more details.</p></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="versioning.html" class="btn btn-neutral float-left" title="Versioning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="resolve_prereleases.html" class="btn btn-neutral float-right" title="Handling version ranges and pre-releases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 10月 28, 2025。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>