<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>持續整合（CI）教學 &mdash; conan 2.11.0 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/ci_tutorial/tutorial.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=272a52d3"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=d9a6981e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="Project setup" href="project_setup.html" />
    <link rel="prev" title="Other important Conan features" href="../tutorial/other_features.html" />


 



</script>
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">介紹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">教學</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CI 教學</a><ul>
<li class="toctree-l2"><a class="reference internal" href="project_setup.html">Project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages_pipeline.html">Packages pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="products_pipeline.html">Products pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devops/devops.html">開發運維指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">範例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incubating.html">孵化中的功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">持續整合（CI）教學</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/ci_tutorial/tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="continuous-integration-ci-tutorial">
<span id="ci-tutorial"></span><h1>持續整合（CI）教學<a class="headerlink" href="#continuous-integration-ci-tutorial" title="Link to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">備註</p>
<ul class="simple">
<li><p>This is an advanced topic, previous knowledge of Conan is necessary. Please <a class="reference internal" href="../tutorial.html#tutorial"><span class="std std-ref">read and practice the user tutorial</span></a> first.</p></li>
<li><p>This section is intended for devops and build engineers designing and implementing a CI pipeline involving Conan packages, if it is not the
case, you can skip this section.</p></li>
</ul>
</div>
<p>Continuous Integration has different meanings for different users and organizations. In this tutorial we will cover the scenarios when users
are doing changes to the source code of their packages and want to automatically build new binaries for those packages and also compute if those new package changes integrate cleanly or break the organization main products.</p>
<p>In this tutorial we will use this small project that uses several packages (static libraries by default) to build a couple of applications, a video game and a map viewer utility. The <code class="docutils literal notranslate"><span class="pre">game</span></code> and <code class="docutils literal notranslate"><span class="pre">mapviewer</span></code> are our final 「<strong>products</strong>」, what we distribute to our users:</p>
<div align="center" class="align-center"><div class="graphviz"><object data="../_images/graphviz-055da720e6994998fec5b402d681cbddeb07e8c7.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph game {
    node [fillcolor=&quot;lightskyblue&quot;, style=filled, shape=box]
    rankdir=&quot;BT&quot;
    &quot;game/1.0&quot; -&gt; &quot;engine/1.0&quot; -&gt; &quot;ai/1.0&quot; -&gt; &quot;mathlib/1.0&quot;;
    &quot;engine/1.0&quot; -&gt; &quot;graphics/1.0&quot; -&gt; &quot;mathlib/1.0&quot;;
    &quot;mapviewer/1.0&quot; -&gt; &quot;graphics/1.0&quot;;
    &quot;game/1.0&quot; [fillcolor=&quot;lightgreen&quot;];
    &quot;mapviewer/1.0&quot; [fillcolor=&quot;lightgreen&quot;];
    {
        rank = same;
        edge[ style=invis];
        &quot;game/1.0&quot; -&gt; &quot;mapviewer/1.0&quot; ;
        rankdir = LR;
    }
}</p></object></div>
</div>
<p>All of the packages in the dependency graph have a <code class="docutils literal notranslate"><span class="pre">requires</span></code> to its direct dependencies using version ranges, for example, <code class="docutils literal notranslate"><span class="pre">game</span></code> contains a <code class="docutils literal notranslate"><span class="pre">requires(&quot;engine/[&gt;=1.0</span> <span class="pre">&lt;2]&quot;)</span></code> so new patch and minor versions of the dependencies will automatically be used without needing to modify the recipes.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p><strong>Important notes</strong></p>
<ul class="simple">
<li><p>This section is written as a hands-on tutorial. It is intended to be reproduced by copying the commands in your machine.</p></li>
<li><p>The tutorial presents some of the tools, good practices and common approaches to the CI problem. But there are no silver bullets.
This tutorial is not the unique way that things should be done.
Different organizations might have different needs and priorities, different build services power and budget, different sizes, etc.
The principles and practices presented in the tutorial might need to be adapted.</p></li>
<li><p>If you have any questions or feedback, please submit a new issue in <a class="reference external" href="https://github.com/conan-io/conan/issues">https://github.com/conan-io/conan/issues</a></p></li>
<li><p>However some of the principles and best practices would be general for all approaches. Things like package immutability, using promotions
between repositories and not using the <code class="docutils literal notranslate"><span class="pre">channel</span></code> for that purpose are good practices that should be followed.</p></li>
</ul>
</div>
<section id="packages-and-products-pipelines">
<h2>Packages and products pipelines<a class="headerlink" href="#packages-and-products-pipelines" title="Link to this heading">¶</a></h2>
<p>When a developer is doing some changes to a package source code, we will consider 2 different parts or pipelines of the overall system CI:
the <strong>packages pipeline</strong> and the <strong>products pipeline</strong></p>
<ul class="simple">
<li><p>The <strong>packages pipeline</strong> takes care of building one single package when its code is changed. If necessary it will build it for different configurations.</p></li>
<li><p>The <strong>products pipeline</strong> takes care of building the main organization 「products」 (the packages that implement the final applications or deliverables),
and making sure that changes and new versions in dependencies integrate correctly, rebuilding any intermediate packages in the graph if necessary.</p></li>
</ul>
<p>The idea is that if some developer does changes to the <code class="docutils literal notranslate"><span class="pre">ai</span></code> package, producing a new <code class="docutils literal notranslate"><span class="pre">ai/1.1.0</span></code> version, the packages pipeline will first build this
new version. But this new version might accidentally break or require rebuilding some consumer packages. If our organization main <strong>products</strong> are
<code class="docutils literal notranslate"><span class="pre">game/1.0</span></code> and <code class="docutils literal notranslate"><span class="pre">mapviewer/1.0</span></code>, then the products pipeline can be triggered, in this case it would rebuild <code class="docutils literal notranslate"><span class="pre">engine/1.0</span></code> and <code class="docutils literal notranslate"><span class="pre">game/1.0</span></code> as
they are affected by the change.</p>
</section>
<section id="repositories-and-promotions">
<h2>Repositories and promotions<a class="headerlink" href="#repositories-and-promotions" title="Link to this heading">¶</a></h2>
<p>The concept of multiple server side repositories is very important for CI. In this tutorial we will use 3 repositories:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">develop</span></code>: This repository is the main one that developers have configured in their machines to be able to <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> dependencies
and work. As such it is expected to be quite stable, similar to a shared 「develop」 branch in git, and the repository should contain pre-compiled
binaries for the organization’s pre-defined platforms, so developers and CI don’t need to do <code class="docutils literal notranslate"><span class="pre">--build=missing</span></code> and build again and again from
source.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">packages</span></code>: This repository will be used to temporarily upload the packages built by the 「packages pipeline」, to not upload them directly to
the <code class="docutils literal notranslate"><span class="pre">develop</span></code> repo and avoid disruption until these packages are fully validated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">products</span></code>: This repository will be used to temporarily upload the packages built by the 「products pipeline」, while building and testing that
new dependencies changes do not break the main 「products」.</p></li>
</ul>
<div align="center" class="align-center"><div class="graphviz"><object data="../_images/graphviz-6b698df88c08a2f6e2e25025ea96e58b4a14bb25.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph repositories {
    node [fillcolor=&quot;lightskyblue&quot;, style=filled, shape=box]
    rankdir=&quot;LR&quot;;
    subgraph cluster_0 {
        style=filled;
                color=lightgrey;
        rankdir=&quot;LR&quot;;
        label = &quot;Packages server&quot;;
        &quot;packages\n repository&quot; -&gt; &quot;products\n repository&quot; -&gt; &quot;develop\n repository&quot; [ label=&quot;promotion&quot; ];
    }

}</p></object></div>
</div>
<p>Promotions are the mechanism used to make packages available from one pipeline to the other. Connecting the above packages and product pipelines
with the repositories, there will be 2 promotions:</p>
<ul class="simple">
<li><p>When all the different binaries for the different configurations have been built for a single package with the <code class="docutils literal notranslate"><span class="pre">packages</span> <span class="pre">pipeline</span></code>, and uploaded
to the <code class="docutils literal notranslate"><span class="pre">packages</span></code> repository, the new version and changes to the package can be considered 「correct」 and promoted (copied) to the <code class="docutils literal notranslate"><span class="pre">products</span></code>
repository.</p></li>
<li><p>When the <code class="docutils literal notranslate"><span class="pre">products</span> <span class="pre">pipeline</span></code> has built from source all the necessary packages that need a re-build because of the new package versions in
the <code class="docutils literal notranslate"><span class="pre">products</span></code> repository and has checked that the organization 「products」 (such <code class="docutils literal notranslate"><span class="pre">game/1.0</span></code> and <code class="docutils literal notranslate"><span class="pre">mapviewer/1.0</span></code>) are not broken, then
the packages can be promoted (copied) from the <code class="docutils literal notranslate"><span class="pre">products</span></code> repo to the <code class="docutils literal notranslate"><span class="pre">develop</span></code> repo, to make them available for all other developers and CI.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">備註</p>
<ul class="simple">
<li><p>The concept of <strong>immutability</strong> is important in package management and devops. Modifying <code class="docutils literal notranslate"><span class="pre">channel</span></code> is strongly discouraged, see <a class="reference internal" href="../devops/package_promotions.html#devops-package-promotions"><span class="std std-ref">Package promotions</span></a>.</p></li>
<li><p>The versioning approach is important. This tutorial will be following <a class="reference internal" href="../devops/versioning/default.html#devops-versioning-default"><span class="std std-ref">the default Conan versioning approach, see details here</span></a></p></li>
</ul>
</div>
<p>This tutorial is just modeling the <strong>development</strong> flow. In production systems, there will be other repositories
and promotions, like a <code class="docutils literal notranslate"><span class="pre">testing</span></code> repository for the QA team, and a final <code class="docutils literal notranslate"><span class="pre">release</span></code> repository for final users, such that packages can
be promoted from <code class="docutils literal notranslate"><span class="pre">develop</span></code> to <code class="docutils literal notranslate"><span class="pre">testing</span></code> to <code class="docutils literal notranslate"><span class="pre">release</span></code> as they pass validation. Read more about promotions in <a class="reference internal" href="../devops/package_promotions.html#devops-package-promotions"><span class="std std-ref">Package promotions</span></a>.</p>
<p>Let’s start with the tutorial, move to the next section to do the project setup:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_setup.html">Project setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="project_setup.html#server-repositories-setup">Server repositories setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_setup.html#initial-dependency-graph">Initial dependency graph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="packages_pipeline.html">Packages pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="packages_pipeline/single_configuration.html">Package pipeline: single configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages_pipeline/multi_configuration.html">Package pipeline: multi configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages_pipeline/multi_configuration_lockfile.html">Package pipeline: multi configuration using lockfiles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="products_pipeline.html">Products pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="products_pipeline.html#what-are-the-products">What are the <strong>products</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="products_pipeline.html#building-intermediate-packages-new-binaries">Building intermediate packages new binaries</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tutorial/other_features.html" class="btn btn-neutral float-left" title="Other important Conan features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="project_setup.html" class="btn btn-neutral float-right" title="Project setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 2月 17, 2026。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>