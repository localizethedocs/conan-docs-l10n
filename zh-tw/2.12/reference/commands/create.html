<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>conan create &mdash; conan 2.12.2 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/reference/commands/create.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=78109108"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="conan download" href="download.html" />
    <link rel="prev" title="conan build" href="build.html" />


 



</script>
<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.12
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">簡介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ci_tutorial/tutorial.html">CI 教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/devops.html">開發運維指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">範例</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../commands.html">Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cache.html">conan cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html">conan config</a></li>
<li class="toctree-l3"><a class="reference internal" href="graph.html">conan graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="inspect.html">conan inspect</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html">conan install</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html">conan list</a></li>
<li class="toctree-l3"><a class="reference internal" href="lock.html">conan lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="pkglist.html">conan pkglist</a></li>
<li class="toctree-l3"><a class="reference internal" href="profile.html">conan profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="remove.html">conan remove</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote.html">conan remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="search.html">conan search</a></li>
<li class="toctree-l3"><a class="reference internal" href="version.html">conan version</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html">conan build</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">conan create</a></li>
<li class="toctree-l3"><a class="reference internal" href="download.html">conan download</a></li>
<li class="toctree-l3"><a class="reference internal" href="editable.html">conan editable</a></li>
<li class="toctree-l3"><a class="reference internal" href="export.html">conan export</a></li>
<li class="toctree-l3"><a class="reference internal" href="export-pkg.html">conan export-pkg</a></li>
<li class="toctree-l3"><a class="reference internal" href="new.html">conan new</a></li>
<li class="toctree-l3"><a class="reference internal" href="source.html">conan source</a></li>
<li class="toctree-l3"><a class="reference internal" href="test.html">conan test</a></li>
<li class="toctree-l3"><a class="reference internal" href="upload.html">conan upload</a></li>
<li class="toctree-l3"><a class="reference internal" href="formatters/graph_info_json_formatter.html">Formatter: Graph-info JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile.html">conanfile.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html">Recipe tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../environment.html">環境變數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binary_model.html">二進位模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_server.html">Conan Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../runners.html">Runners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../incubating.html">孵化中的功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../commands.html">Commands</a></li>
      <li class="breadcrumb-item active">conan create</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/reference/commands/create.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conan-create">
<span id="reference-commands-create"></span><h1>conan create<a class="headerlink" href="#conan-create" title="Link to this heading">¶</a></h1>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ conan create -h
usage: conan create [-h] [-v [V]] [-cc CORE_CONF] [-f FORMAT]
                    [--out-file OUT_FILE] [--name NAME] [--version VERSION]
                    [--user USER] [--channel CHANNEL] [-l LOCKFILE]
                    [--lockfile-partial] [--lockfile-out LOCKFILE_OUT]
                    [--lockfile-clean]
                    [--lockfile-overrides LOCKFILE_OVERRIDES] [-b BUILD]
                    [-r REMOTE | -nr] [-u [UPDATE]] [-pr PROFILE]
                    [-pr:b PROFILE_BUILD] [-pr:h PROFILE_HOST]
                    [-pr:a PROFILE_ALL] [-o OPTIONS] [-o:b OPTIONS_BUILD]
                    [-o:h OPTIONS_HOST] [-o:a OPTIONS_ALL] [-s SETTINGS]
                    [-s:b SETTINGS_BUILD] [-s:h SETTINGS_HOST]
                    [-s:a SETTINGS_ALL] [-c CONF] [-c:b CONF_BUILD]
                    [-c:h CONF_HOST] [-c:a CONF_ALL] [--build-require]
                    [-tf TEST_FOLDER] [-tm] [-bt BUILD_TEST]
                    path

Create a package.

positional arguments:
  path                  Path to a folder containing a recipe (conanfile.py)

options:
  -h, --help            show this help message and exit
  -v [V]                Level of detail of the output. Valid options from less
                        verbose to more verbose: -vquiet, -verror, -vwarning,
                        -vnotice, -vstatus, -v or -vverbose, -vv or -vdebug,
                        -vvv or -vtrace
  -cc CORE_CONF, --core-conf CORE_CONF
                        Define core configuration, overwriting global.conf
                        values. E.g.: -cc core:non_interactive=True
  -f FORMAT, --format FORMAT
                        Select the output format: json
  --out-file OUT_FILE   Write the output of the command to the specified file
                        instead of stdout.
  --name NAME           Provide a package name if not specified in conanfile
  --version VERSION     Provide a package version if not specified in
                        conanfile
  --user USER           Provide a user if not specified in conanfile
  --channel CHANNEL     Provide a channel if not specified in conanfile
  -l LOCKFILE, --lockfile LOCKFILE
                        Path to a lockfile. Use --lockfile=&quot;&quot; to avoid
                        automatic use of existing &#39;conan.lock&#39; file
  --lockfile-partial    Do not raise an error if some dependency is not found
                        in lockfile
  --lockfile-out LOCKFILE_OUT
                        Filename of the updated lockfile
  --lockfile-clean      Remove unused entries from the lockfile
  --lockfile-overrides LOCKFILE_OVERRIDES
                        Overwrite lockfile overrides
  -b BUILD, --build BUILD
                        Optional, specify which packages to build from source.
                        Combining multiple &#39;--build&#39; options on one command
                        line is allowed. Possible values: --build=never
                        Disallow build for all packages, use binary packages
                        or fail if a binary package is not found, it cannot be
                        combined with other &#39;--build&#39; options. --build=missing
                        Build packages from source whose binary package is not
                        found. --build=cascade Build packages from source that
                        have at least one dependency being built from source.
                        --build=[pattern] Build packages from source whose
                        package reference matches the pattern. The pattern
                        uses &#39;fnmatch&#39; style wildcards, so &#39;--build=&quot;*&quot;&#39; will
                        build everything from source. --build=~[pattern]
                        Excluded packages, which will not be built from the
                        source, whose package reference matches the pattern.
                        The pattern uses &#39;fnmatch&#39; style wildcards.
                        --build=missing:[pattern] Build from source if a
                        compatible binary does not exist, only for packages
                        matching pattern. --build=compatible:[pattern]
                        (Experimental) Build from source if a compatible
                        binary does not exist, and the requested package is
                        invalid, the closest package binary following the
                        defined compatibility policies (method and
                        compatibility.py)
  -r REMOTE, --remote REMOTE
                        Look in the specified remote or remotes server
  -nr, --no-remote      Do not use remote, resolve exclusively in the cache
  -u [UPDATE], --update [UPDATE]
                        Will install newer versions and/or revisions in the
                        local cache for the given reference name, or all
                        references in the graph if no argument is supplied.
                        When using version ranges, it will install the latest
                        version that satisfies the range. It will update to
                        the latest revision for the resolved version range.
  -pr PROFILE, --profile PROFILE
                        Apply the specified profile. By default, or if
                        specifying -pr:h (--profile:host), it applies to the
                        host context. Use -pr:b (--profile:build) to specify
                        the build context, or -pr:a (--profile:all) to specify
                        both contexts at once
  -pr:b PROFILE_BUILD, --profile:build PROFILE_BUILD
  -pr:h PROFILE_HOST, --profile:host PROFILE_HOST
  -pr:a PROFILE_ALL, --profile:all PROFILE_ALL
  -o OPTIONS, --options OPTIONS
                        Apply the specified options. By default, or if
                        specifying -o:h (--options:host), it applies to the
                        host context. Use -o:b (--options:build) to specify
                        the build context, or -o:a (--options:all) to specify
                        both contexts at once. Example:
                        -o=&quot;pkg/*:with_qt=True&quot;
  -o:b OPTIONS_BUILD, --options:build OPTIONS_BUILD
  -o:h OPTIONS_HOST, --options:host OPTIONS_HOST
  -o:a OPTIONS_ALL, --options:all OPTIONS_ALL
  -s SETTINGS, --settings SETTINGS
                        Apply the specified settings. By default, or if
                        specifying -s:h (--settings:host), it applies to the
                        host context. Use -s:b (--settings:build) to specify
                        the build context, or -s:a (--settings:all) to specify
                        both contexts at once. Example: -s=&quot;compiler=gcc&quot;
  -s:b SETTINGS_BUILD, --settings:build SETTINGS_BUILD
  -s:h SETTINGS_HOST, --settings:host SETTINGS_HOST
  -s:a SETTINGS_ALL, --settings:all SETTINGS_ALL
  -c CONF, --conf CONF  Apply the specified conf. By default, or if specifying
                        -c:h (--conf:host), it applies to the host context.
                        Use -c:b (--conf:build) to specify the build context,
                        or -c:a (--conf:all) to specify both contexts at once.
                        Example:
                        -c=&quot;tools.cmake.cmaketoolchain:generator=Xcode&quot;
  -c:b CONF_BUILD, --conf:build CONF_BUILD
  -c:h CONF_HOST, --conf:host CONF_HOST
  -c:a CONF_ALL, --conf:all CONF_ALL
  --build-require       Whether the package being created is a build-require
                        (to be used as tool_requires() by other packages)
  -tf TEST_FOLDER, --test-folder TEST_FOLDER
                        Alternative test folder name. By default it is
                        &quot;test_package&quot;. Use &quot;&quot; to skip the test stage
  -tm, --test-missing   Run the test_package checks only if the package is
                        built from source but not if it already existed (using
                        --build=missing)
  -bt BUILD_TEST, --build-test BUILD_TEST
                        Same as &#39;--build&#39; but only for the test_package
                        requires. By default if not specified it will take the
                        &#39;--build&#39; value if specified
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> command creates a package from the recipe specified in <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<p>This command will first <strong class="command">export</strong> the recipe to the local cache and then build
and create the package. If a <code class="docutils literal notranslate"><span class="pre">test_package</span></code> folder (you can change the folder name with
the <code class="docutils literal notranslate"><span class="pre">-tf</span></code> argument or with the <code class="docutils literal notranslate"><span class="pre">test_package_folder</span></code> recipe attribute) is found, the command will run the consumer project to ensure that
the package has been created correctly. Check <a class="reference internal" href="../../tutorial/creating_packages/test_conan_packages.html#tutorial-creating-test"><span class="std std-ref">testing Conan packages</span></a> section to know more about how to test your Conan packages.</p>
<div class="admonition tip">
<p class="admonition-title">小訣竅</p>
<p>Sometimes you want to <strong>skip/disable the test stage</strong>. In that case you can skip/disable
the test package stage by passing an empty value as the <code class="docutils literal notranslate"><span class="pre">-tf</span></code> argument:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>--test-folder<span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>You might also want to do <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">.</span> <span class="pre">--build=missing</span></code> so the package is not built
if a binary already exists in the servers. If you want to also avoid the <code class="docutils literal notranslate"><span class="pre">test_package</span></code>
step when the binary already exists, you can apply the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">.</span> <span class="pre">--build=missing</span> <span class="pre">--test-missing</span></code>,
and it will only launch the test-package when the binary is built from source.</p>
</div>
<section id="using-conan-create-with-build-requirements">
<h2>Using conan create with build requirements<a class="headerlink" href="#using-conan-create-with-build-requirements" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">--build-require</span></code> argument allows to create the package using the configuration and
settings of the 「build」 context, as it was a <code class="docutils literal notranslate"><span class="pre">build_require</span></code>. This feature allows to
create packages in a way that is consistent with the way they will be used later.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>--name<span class="o">=</span>cmake<span class="w"> </span>--version<span class="o">=</span><span class="m">3</span>.23.1<span class="w"> </span>--build-require
</pre></div>
</div>
</section>
<section id="conan-create-output">
<h2>Conan create output<a class="headerlink" href="#conan-create-output" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">...</span> <span class="pre">--format=json</span></code> creates a json output containing the full dependency graph information.
This json is the same as the one created with <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">graph</span> <span class="pre">info</span></code> (see the <a class="reference internal" href="formatters/graph_info_json_formatter.html#reference-commands-graph-info-json-format"><span class="std std-ref">graph info json format</span></a>)
with extended information about the binaries, like a more complete <code class="docutils literal notranslate"><span class="pre">cpp_info</span></code> field.
This resulting json is the dependency graph of the package recipe being created, excluding all the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> and other possible dependencies of the <code class="docutils literal notranslate"><span class="pre">test_package/conanfile.py</span></code>. These dependencies only exist in the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> functionality, and as such, are not part of the 「main」 product or package. If you are interested in capturing the dependency graph including the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> (most likely not necessary in most cases), then you can do it running the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">test</span></code> command separately.</p>
<p>The same happens for lockfiles created with <code class="docutils literal notranslate"><span class="pre">--lockfile-out</span></code> argument. The lockfile will only contain the created package and its transitive dependencies versions, but it will not contain the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> or the transitive dependencies of the <code class="docutils literal notranslate"><span class="pre">test_package/conanfile.py</span></code>. It is possible to capture a lockfile which includes those with the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">test</span></code> command (though again, this might not be really necessary)</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p><strong>Best practice</strong></p>
<p>In general, having <code class="docutils literal notranslate"><span class="pre">test_package/conanfile.py</span></code> with dependencies other than the tested
one should be avoided. The <code class="docutils literal notranslate"><span class="pre">test_package</span></code> functionality should serve as a simple check
to ensure the package is correctly created. Adding extra dependencies to
<code class="docutils literal notranslate"><span class="pre">test_package</span></code> might indicate that the check is not straightforward or that its
functionality is being misused. If, for any reason, your <code class="docutils literal notranslate"><span class="pre">test_package</span></code> has additional
dependencies, you can control their build using the <code class="docutils literal notranslate"><span class="pre">--build-test</span></code> argument.</p>
</div>
</section>
<section id="methods-execution-order">
<h2>Methods execution order<a class="headerlink" href="#methods-execution-order" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> executes <a class="reference internal" href="../conanfile/methods.html#reference-conanfile-methods"><span class="std std-ref">methods</span></a> of a <em>conanfile.py</em> in the following order:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Export recipe to the cache</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_name()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_version()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_sources()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Compute dependency graph</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ìnit()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config_options()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">configure()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Compute necessary packages</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">validate_build()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validate()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_id()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layout()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_requirements()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Install packages</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_id()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_info()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<p>Steps <code class="docutils literal notranslate"><span class="pre">generate()</span></code>,  <code class="docutils literal notranslate"><span class="pre">build()</span></code>, <code class="docutils literal notranslate"><span class="pre">package()</span></code> from <em>Install packages</em> step will not be called if the package
is not being built from sources.</p>
<p>After that, if you have a folder named <em>test_package</em> in your project or you call the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> command with the
<code class="docutils literal notranslate"><span class="pre">--test-folder</span></code> flag, the command will invoke the methods of the <em>conanfile.py</em> file inside the folder in the following order:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Launch test_package</dt><dd><ol class="arabic simple">
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">init()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">set_name()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">set_version()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Compute dependency graph</dt><dd><ol class="arabic simple">
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">config_options()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">configure()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">requirements()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ìnit()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config_options()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">configure()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requirements()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Compute necessary packages</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">validate_build()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validate()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_id()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layout()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">validate_build()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">validate()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">package_id()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">layout()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system_requirements()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">system_requirements()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Install packages</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build_id()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_info()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Test the package</dt><dd><ol class="arabic simple">
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">build()</span></code></p></li>
<li><p>(test package) <code class="docutils literal notranslate"><span class="pre">test()</span></code></p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<p>The functions with <em>(test package)</em> belong to the <em>conanfile.py</em> in the <em>test_package</em> folder. The steps
<code class="docutils literal notranslate"><span class="pre">build_id()</span></code>, <code class="docutils literal notranslate"><span class="pre">generate()</span></code>, <code class="docutils literal notranslate"><span class="pre">build()</span></code> inside the <em>Install packages</em> step will be skipped if the project is
already installed. Typically, it should be installed just as it was installed in the previous 「install packages」 step.</p>
</section>
<section id="build-modes">
<h2>Build modes<a class="headerlink" href="#build-modes" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">--build=&lt;xxxx&gt;</span></code> build modes are very similar to the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> ones documented in <a class="reference internal" href="install.html#reference-commands-build-modes"><span class="std std-ref">Build Modes</span></a>,
with some differences.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> defines the <code class="docutils literal notranslate"><span class="pre">--build=current_pkg/current_version</span></code> to force the build
from source for the current revision. This assumes that the source code (recipe, C/C++ code) was
changed and it will create a new revision. If that is not the case, then the <code class="docutils literal notranslate"><span class="pre">--build=missing:current_pkg/current_version</span></code>
would be recommended to avoid rebuilding from source an already existing binary.</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">--build=xxx</span></code> argument is defined in the command line, then the automatically defined
<code class="docutils literal notranslate"><span class="pre">--build=current_pkg/current_version</span></code> is no longer passed, and it should be passed as a explicit argument too.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p><strong>最佳實踐</strong></p>
<p>Having more than a <code class="docutils literal notranslate"><span class="pre">package_revision</span></code> for a given <code class="docutils literal notranslate"><span class="pre">recipe_revision</span></code> and <code class="docutils literal notranslate"><span class="pre">package_id</span></code> is discouraged
in most cases, as it implies unnecessarily rebuilding from sources binaries that were already existing. For that
reason, using <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> repeatedly over the same recipe without any source changes that would cause a
new <code class="docutils literal notranslate"><span class="pre">recipe_revision</span></code> is discouraged, and using <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">.</span> <span class="pre">--build=missing:[pattern]</span></code> would be the
recommended approach.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">也參考</p>
<ul class="simple">
<li><p>Read more about creating packages in the <a class="reference internal" href="../../tutorial/creating_packages.html#tutorial-creating-packages"><span class="std std-ref">dedicated
tutorial</span></a></p></li>
<li><p>Read more about <a class="reference internal" href="../../tutorial/creating_packages/test_conan_packages.html#tutorial-creating-test"><span class="std std-ref">testing Conan packages</span></a></p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="build.html" class="btn btn-neutral float-left" title="conan build" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="download.html" class="btn btn-neutral float-right" title="conan download" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 10月 28, 2025。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>