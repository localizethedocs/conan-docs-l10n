<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MakeDeps &mdash; conan 2.13.0 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/reference/tools/gnu/makedeps.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c2de7da6"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜尋" href="../../../search.html" />
    <link rel="next" title="PkgConfigDeps" href="pkgconfigdeps.html" />
    <link rel="prev" title="Autotools" href="autotools.html" />


 



</script>
<script type="text/javascript" src="../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.13
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">簡介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ci_tutorial/tutorial.html">CI 教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops/devops.html">開發運維指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">範例</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conanfile.html">conanfile.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../tools.html">Recipe tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../android.html">conan.tools.android</a></li>
<li class="toctree-l3"><a class="reference internal" href="../apple.html">conan.tools.apple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build.html">conan.tools.build</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cmake.html">conan.tools.cmake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cpp_info.html">conan.tools.CppInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../env.html">conan.tools.env</a></li>
<li class="toctree-l3"><a class="reference internal" href="../files.html">conan.tools.files</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../gnu.html">conan.tools.gnu</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="autotoolsdeps.html">AutotoolsDeps</a></li>
<li class="toctree-l4"><a class="reference internal" href="autotoolstoolchain.html">AutotoolsToolchain</a></li>
<li class="toctree-l4"><a class="reference internal" href="autotools.html">Autotools</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">MakeDeps</a></li>
<li class="toctree-l4"><a class="reference internal" href="pkgconfigdeps.html">PkgConfigDeps</a></li>
<li class="toctree-l4"><a class="reference internal" href="pkgconfig.html">PkgConfig</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../google.html">conan.tools.google</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel.html">conan.tools.intel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../layout.html">conan.tools.layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meson.html">conan.tools.meson</a></li>
<li class="toctree-l3"><a class="reference internal" href="../microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ros.html">conan.tools.ros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sbom.html">conan.tools.sbom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scm.html">conan.tools.scm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scons.html">conan.tools.scons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../premake.html">conan.tools.premake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system.html">conan.tools.system</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../environment.html">環境變數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../binary_model.html">二進位模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conan_server.html">Conan Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../runners.html">Runners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../incubating.html">孵化中的功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../../tools.html">Recipe tools</a></li>
          <li class="breadcrumb-item"><a href="../gnu.html">conan.tools.gnu</a></li>
      <li class="breadcrumb-item active">MakeDeps</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/reference/tools/gnu/makedeps.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="makedeps">
<span id="conan-tools-gnu-makedeps"></span><h1>MakeDeps<a class="headerlink" href="#makedeps" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This feature is experimental and subject to breaking changes.
See <a class="reference internal" href="../../../introduction.html#stability"><span class="std std-ref">the Conan stability</span></a> section for more information.</p>
</div>
<p id="id1"><code class="docutils literal notranslate"><span class="pre">MakeDeps</span></code> is the dependencies generator for make. It generates a Makefile file named <code class="docutils literal notranslate"><span class="pre">conandeps.mk</span></code>
containing a valid make file syntax with all dependencies listed, including their components.</p>
<p>This generator can be used by name in conanfiles:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">conanfile.py</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;MakeDeps&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">conanfile.txt</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[generators]
MakeDeps
</pre></div>
</div>
</div>
<p>And it can also be fully instantiated in the conanfile <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.gnu</span><span class="w"> </span><span class="kn">import</span> <span class="n">MakeDeps</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;zlib/1.2.13&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pc</span> <span class="o">=</span> <span class="n">MakeDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">pc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<section id="generated-files">
<h2>生成的文件<a class="headerlink" href="#generated-files" title="Link to this heading">¶</a></h2>
<p><cite>make</cite> format file named <code class="docutils literal notranslate"><span class="pre">conandeps.mk</span></code>, containing a valid makefile file syntax.
The <code class="docutils literal notranslate"><span class="pre">prefix</span></code> variable is automatically adjusted to the <code class="docutils literal notranslate"><span class="pre">package_folder</span></code>:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">CONAN_DEPS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>zlib

<span class="c"># zlib/1.2.13</span>
<span class="nv">CONAN_NAME_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>zlib
<span class="nv">CONAN_VERSION_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>.2.13
<span class="nv">CONAN_REFERENCE_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>zlib/1.2.13
<span class="nv">CONAN_ROOT_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/home/conan/.conan2/p/b/zlib273508b343e8c/p
<span class="nv">CONAN_INCLUDE_DIRS_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_INCLUDE_DIR_FLAG<span class="k">)$(</span>CONAN_ROOT_ZLIB<span class="k">)</span>/include
<span class="nv">CONAN_LIB_DIRS_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_LIB_DIR_FLAG<span class="k">)$(</span>CONAN_ROOT_ZLIB<span class="k">)</span>/lib
<span class="nv">CONAN_BIN_DIRS_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_BIN_DIR_FLAG<span class="k">)$(</span>CONAN_ROOT_ZLIB<span class="k">)</span>/bin
<span class="nv">CONAN_LIBS_ZLIB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_LIB_FLAG<span class="k">)</span>z

<span class="nv">CONAN_INCLUDE_DIRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_INCLUDE_DIRS_ZLIB<span class="k">)</span>
<span class="nv">CONAN_LIB_DIRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_LIB_DIRS_ZLIB<span class="k">)</span>
<span class="nv">CONAN_BIN_DIRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_BIN_DIRS_ZLIB<span class="k">)</span>
<span class="nv">CONAN_LIBS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">$(</span>CONAN_LIBS_ZLIB<span class="k">)</span>
</pre></div>
</div>
<section id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Link to this heading">¶</a></h3>
<p>Makefile variables will be generated for each property set in <cite>package_info()</cite> of all dependencies and their components. Let’s take following receipt:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyLib</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;mylib&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;my.prop&quot;</span><span class="p">,</span> <span class="s2">&quot;some vale&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="s2">&quot;mycomp&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;comp_prop&quot;</span><span class="p">,</span> <span class="s2">&quot;comp_value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting makefile variable assignments would look like this:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="c"># mylib/1.0</span>

<span class="c">#[...]</span>
<span class="nv">CONAN_PROPERTY_MYLIB_MY_PROP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>some<span class="w"> </span>value
<span class="nv">CONAN_PROPERTY_MYLIB_MYCOMP_COMP_PROP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>comp_value
</pre></div>
</div>
<p>When substituting package names, component names and property names into makefile variable names, the names are converted to uppercase and all characters except <cite>A-Z</cite>, <cite>0-9</cite> and <cite>_</cite> are replaced with <cite>_</cite> (see example above with a dot in the property name). The property value is not modified, it is put to the right side of the variable assignment literally. Any whitespace and special character remain unchagend, no quotation or escaping is applied, because GNU Make is not consistent in escaping spaces and cannot handle whitespaces in path names anyway. Because values with newlines would break the makefile they are skipped and a warning is displayed.</p>
</section>
</section>
<section id="customization">
<h2>Customization<a class="headerlink" href="#customization" title="Link to this heading">¶</a></h2>
<section id="flags">
<h3>Flags<a class="headerlink" href="#flags" title="Link to this heading">¶</a></h3>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">conandeps.mk</span></code> will contain all dependencies listed, including their <code class="docutils literal notranslate"><span class="pre">cpp_info</span></code> information, but will not pass any flags to the compiler.</p>
<p>Thus, the consumer should pass the following flags to the compiler:</p>
<ul class="simple">
<li><p><strong>CONAN_LIB_FLAG</strong>: Add a prefix to all libs variables, e.g. <code class="docutils literal notranslate"><span class="pre">-l</span></code></p></li>
<li><p><strong>CONAN_DEFINE_FLAG</strong>: Add a prefix to all defines variables, e.g. <code class="docutils literal notranslate"><span class="pre">-D</span></code></p></li>
<li><p><strong>CONAN_SYSTEM_LIB_FLAG</strong>: Add a prefix to all system_libs variables, e.g. <code class="docutils literal notranslate"><span class="pre">-l</span></code></p></li>
<li><p><strong>CONAN_INCLUDE_DIR_FLAG</strong>: Add a prefix to all include dirs variables, e.g. <code class="docutils literal notranslate"><span class="pre">-I</span></code></p></li>
<li><p><strong>CONAN_LIB_DIR_FLAG</strong>: Add a prefix to all lib dirs variables, e.g. <code class="docutils literal notranslate"><span class="pre">-L</span></code></p></li>
<li><p><strong>CONAN_BIN_DIR_FLAG</strong>: Add a prefix to all bin dirs variables, e.g. <code class="docutils literal notranslate"><span class="pre">-L</span></code></p></li>
</ul>
<p>Those flags should be appended as prefixes to flags variables. For example, if the <code class="docutils literal notranslate"><span class="pre">CONAN_LIB_FLAG</span></code> is set to <code class="docutils literal notranslate"><span class="pre">-l</span></code>, the <code class="docutils literal notranslate"><span class="pre">CONAN_LIBS</span></code> variable will be set to <code class="docutils literal notranslate"><span class="pre">-lz</span></code>.</p>
</section>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="conan.tools.gnu.MakeDeps">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MakeDeps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conanfile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#conan.tools.gnu.MakeDeps" title="Link to this definition">¶</a></dt>
<dd><p>Generates a Makefile with the variables needed to build a project with the specified.</p>
<dl class="field-list simple">
<dt class="field-odd">參數<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conanfile</strong> – <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">ConanFile</span> <span class="pre">object</span> <span class="pre">&gt;</span></code> The current recipe object. Always use <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="conan.tools.gnu.MakeDeps.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#conan.tools.gnu.MakeDeps.generate" title="Link to this definition">¶</a></dt>
<dd><p>Collects all dependencies and components, then, generating a Makefile</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="autotools.html" class="btn btn-neutral float-left" title="Autotools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pkgconfigdeps.html" class="btn btn-neutral float-right" title="PkgConfigDeps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 10月 28, 2025。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>