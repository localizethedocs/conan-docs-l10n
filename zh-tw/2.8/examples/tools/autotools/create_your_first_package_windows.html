<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create your first Conan package with Autotools in Windows (msys2) &mdash; conan 2.8.1 說明文件</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://projects.localizethedocs.org/conan-docs-l10n/examples/tools/autotools/create_your_first_package_windows.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=f2b6d763"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/translations.js?v=d9a6981e"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜尋" href="../../../search.html" />
    <link rel="next" title="Capturing Git scm information" href="../scm/git/capture_scm/git_capture_scm.html" />
    <link rel="prev" title="Create your first Conan package with Autotools" href="create_your_first_package.html" />


 



</script>
<script type="text/javascript" src="../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.8
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">介紹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">教學</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops.html">開發運維指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integrations.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../examples.html">範例</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../conanfile.html">ConanFile 方法範例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions.html">Conan 擴充功能範例</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../tools.html">Conan recipe tools examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../cmake/cmake.html">CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../files/files.html">File interaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meson/meson.html">Meson</a></li>
<li class="toctree-l3"><a class="reference internal" href="../google/bazel.html">Bazel</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="autotools.html">Autotools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="build_project_autotools_toolchain.html">Build a simple Autotools project with Conan dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_your_first_package.html">Create your first Conan package with Autotools</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Create your first Conan package with Autotools in Windows (msys2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../scm/git/capture_scm/git_capture_scm.html">Capturing Git scm information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../microsoft/msbuild.html">MSBuild</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cross_build.html">交叉建置範例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config_files.html">組態檔範例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../graph.html">Graph examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dev_flow.html">開發者工具與流程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commands.html">Conan 命令範例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../runners.html">Conan 執行器範例</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">變更日誌</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../examples.html">範例</a></li>
          <li class="breadcrumb-item"><a href="../../tools.html">Conan recipe tools examples</a></li>
          <li class="breadcrumb-item"><a href="autotools.html">Autotools</a></li>
      <li class="breadcrumb-item active">Create your first Conan package with Autotools in Windows (msys2)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/examples/tools/autotools/create_your_first_package_windows.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="create-your-first-conan-package-with-autotools-in-windows-msys2">
<span id="examples-tools-autotools-create-first-package-windows"></span><h1>Create your first Conan package with Autotools in Windows (msys2)<a class="headerlink" href="#create-your-first-conan-package-with-autotools-in-windows-msys2" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This example is intended for the Windows OS, using the <code class="docutils literal notranslate"><span class="pre">msys2</span></code> subsystem to run the autotools build system.
The support is <strong>limited</strong>, the <code class="docutils literal notranslate"><span class="pre">AutotoolsDeps</span></code> generator still doesn’t work for Windows, so the <code class="docutils literal notranslate"><span class="pre">test_package</span></code>
in the default template will fail.</p>
<p>Note this example is building with the MSVC compiler, not with MinGW/gcc. Even if the build system is autotools,
the example is targeting the MSVC compiler, and the resulting package will be binary compatible and can be used
from other packages using MSVC with other build systems. It is not necessary to force MinGW/gcc to use some
open source dependencies that use autotools, and ConanCenter builds all of them with MSVC.</p>
</div>
<p>In the <a class="reference internal" href="create_your_first_package.html#examples-tools-autotools-create-first-package"><span class="std std-ref">Create your first Conan package with Autotools</span></a>
tutorial, the autotools integrations are presented. Please read first that section, to understand them, as this
section will only introduce the Windows/msys2 specific issues.</p>
<p>We will use the same the <strong class="command">conan new</strong> command to create a 「Hello World」 C++ library example project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>autotools_lib<span class="w"> </span>-d<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mypkg<span class="w"> </span>-d<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">0</span>.1
</pre></div>
</div>
<p>Check the above tutorial to understand the created files.</p>
<p>Besides these files, we will create a profile file:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">msys2_profile</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">include(default)</span>

<span class="k">[conf]</span>
<span class="na">tools.microsoft.bash</span><span class="o">:</span><span class="s">subsystem=msys2</span>
<span class="na">tools.microsoft.bash</span><span class="o">:</span><span class="s">path=C:\ws\msys64\usr\bin\bash</span>
<span class="na">tools.build:compiler_executables={&quot;c&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;cl&quot;</span><span class="na">, &quot;cpp&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;cl&quot;</span><span class="na">}</span>
</pre></div>
</div>
</div>
<p>Note that you might need to adapt the path to the <code class="docutils literal notranslate"><span class="pre">bash</span></code> system of <code class="docutils literal notranslate"><span class="pre">msys2</span></code>.</p>
<p>In the package recipe <em>conanfile.py</em> we will have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">win_bash</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>This is very important, it tells Conan that when this package is to be built, it has to launch a <code class="docutils literal notranslate"><span class="pre">bash</span></code> shell to
execute the build in it.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>It is not necessary, and in fact it is not recommended for most cases to be already running inside an <code class="docutils literal notranslate"><span class="pre">msys2</span></code>
terminal. Conan will automatically run the build subprocess for autotools in the defined bash shell.</p>
<p>If already running in a bash shell, it is necessary to activate the <code class="docutils literal notranslate"><span class="pre">tools.microsoft.bash:activate=True</span></code> conf.</p>
</div>
<p>Let’s build the package from sources with the current default configuration, making sure to deactivate the <code class="docutils literal notranslate"><span class="pre">test_package</span></code>,
because otherwise it will fail.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Deactivating the test_package, as AutotoolsDeps doesn&#39;t work yet.</span>
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>-pr<span class="o">=</span>msys2_profile<span class="w"> </span>-tf<span class="o">=</span><span class="s2">&quot;&quot;</span>

...
mypkg/0.1:<span class="w"> </span>package<span class="o">()</span>:<span class="w"> </span>Packaged<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">&#39;.h&#39;</span><span class="w"> </span>file:<span class="w"> </span>mypkg.h
mypkg/0.1:<span class="w"> </span>package<span class="o">()</span>:<span class="w"> </span>Packaged<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">&#39;.la&#39;</span><span class="w"> </span>file:<span class="w"> </span>libmypkg.la
mypkg/0.1:<span class="w"> </span>package<span class="o">()</span>:<span class="w"> </span>Packaged<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">&#39;.lib&#39;</span><span class="w"> </span>file:<span class="w"> </span>mypkg.lib
mypkg/0.1:<span class="w"> </span>Created<span class="w"> </span>package<span class="w"> </span>revision<span class="w"> </span>fa661758835cf6f7f311c857447393cc
mypkg/0.1:<span class="w"> </span>Package<span class="w"> </span><span class="s1">&#39;9bdee485ef71c14ac5f8a657202632bdb8b4482b&#39;</span><span class="w"> </span>created
</pre></div>
</div>
<p>We can now validate that the recipe and the package binary are in the cache:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w">  </span>conan<span class="w"> </span>list<span class="w"> </span><span class="s2">&quot;mypkg:*&quot;</span>
Found<span class="w"> </span><span class="m">1</span><span class="w"> </span>pkg/version<span class="w"> </span>recipes<span class="w"> </span>matching<span class="w"> </span>mypkg<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>cache
Local<span class="w"> </span>Cache
<span class="w">  </span>mypkg
<span class="w">    </span>mypkg/0.1
<span class="w">      </span>revisions
<span class="w">        </span>6e85b0c27c7fbc8eddc1994dbb543b52<span class="w"> </span><span class="o">(</span><span class="m">2024</span>-04-30<span class="w"> </span><span class="m">18</span>:29:44<span class="w"> </span>UTC<span class="o">)</span>
<span class="w">          </span>packages
<span class="w">            </span>9bdee485ef71c14ac5f8a657202632bdb8b4482b
<span class="w">              </span>info
<span class="w">                </span>settings
<span class="w">                  </span>arch:<span class="w"> </span>x86_64
<span class="w">                  </span>build_type:<span class="w"> </span>Release
<span class="w">                  </span>compiler:<span class="w"> </span>msvc
<span class="w">                  </span>compiler.cppstd:<span class="w"> </span><span class="m">14</span>
<span class="w">                  </span>compiler.runtime:<span class="w"> </span>dynamic
<span class="w">                  </span>compiler.runtime_type:<span class="w"> </span>Release
<span class="w">                  </span>compiler.version:<span class="w"> </span><span class="m">193</span>
<span class="w">                  </span>os:<span class="w"> </span>Windows
<span class="w">                </span>options
<span class="w">                  </span>shared:<span class="w"> </span>False
</pre></div>
</div>
<p>Note how the binary is a <code class="docutils literal notranslate"><span class="pre">compiler=msvc</span></code> one.</p>
<div class="admonition seealso">
<p class="admonition-title">也參考</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../reference/tools/gnu.html#conan-tools-gnu"><span class="std std-ref">GNU built-in integrations reference</span></a>.</p></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="create_your_first_package.html" class="btn btn-neutral float-left" title="Create your first Conan package with Autotools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../scm/git/capture_scm/git_capture_scm.html" class="btn btn-neutral float-right" title="Capturing Git scm information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">最後更新於 2月 17, 2026。
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>


 


</body>
</html>